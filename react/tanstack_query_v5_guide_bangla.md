# TanStack Query v5: ‡¶ú‡ßÅ‡¶®‡¶ø‡¶Ø‡¶º‡¶∞ ‡¶´‡ßç‡¶∞‡¶®‡ßç‡¶ü‡¶è‡¶®‡ßç‡¶° ‡¶°‡ßá‡¶≠‡ßá‡¶≤‡¶™‡¶æ‡¶∞‡¶¶‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶ï‡¶Æ‡¶™‡ßç‡¶≤‡¶ø‡¶ü ‡¶ó‡¶æ‡¶á‡¶° (Next.js App Router & JavaScript)

‡¶è‡¶á ‡¶ó‡¶æ‡¶á‡¶°‡¶ü‡¶ø ‡¶Ü‡¶™‡¶®‡¶æ‡¶ï‡ßá **TanStack Query v5** (‡¶Ø‡¶æ ‡¶Ü‡¶ó‡ßá React Query ‡¶®‡¶æ‡¶Æ‡ßá ‡¶™‡¶∞‡¶ø‡¶ö‡¶ø‡¶§ ‡¶õ‡¶ø‡¶≤) ‡¶è‡¶ï‡¶¶‡¶Æ ‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶•‡ßá‡¶ï‡ßá ‡¶™‡ßç‡¶∞‡¶´‡ßá‡¶∂‡¶®‡¶æ‡¶≤ ‡¶≤‡ßá‡¶≠‡ßá‡¶≤ ‡¶™‡¶∞‡ßç‡¶Ø‡¶®‡ßç‡¶§ ‡¶∂‡¶ø‡¶ñ‡¶§‡ßá ‡¶∏‡¶æ‡¶π‡¶æ‡¶Ø‡ßç‡¶Ø ‡¶ï‡¶∞‡¶¨‡ßá‡•§ ‡¶è‡¶ü‡¶ø ‡¶¨‡¶ø‡¶∂‡ßá‡¶∑ ‡¶ï‡¶∞‡ßá ‡¶§‡¶æ‡¶¶‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶§‡ßà‡¶∞‡¶ø ‡¶Ø‡¶æ‡¶∞‡¶æ ‡¶á‡¶â‡¶∞‡ßã‡¶™ ‡¶¨‡¶æ ‡¶Ü‡¶Æ‡ßá‡¶∞‡¶ø‡¶ï‡¶æ‡¶∞ ‡¶∞‡¶ø‡¶Æ‡ßã‡¶ü ‡¶ú‡¶¨‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶™‡ßç‡¶∞‡¶∏‡ßç‡¶§‡ßÅ‡¶§‡¶ø ‡¶®‡¶ø‡¶ö‡ßç‡¶õ‡ßá‡¶®‡•§

---

## ‡ßß. TanStack Query ‡¶ï‡ßÄ ‡¶è‡¶¨‡¶Ç ‡¶ï‡ßá‡¶®? (What & Why)

### TanStack Query ‡¶ï‡ßÄ?

‡¶∏‡¶π‡¶ú ‡¶ï‡¶•‡¶æ‡ßü, **TanStack Query** ‡¶π‡¶≤‡ßã React ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™‡ßç‡¶≤‡¶ø‡¶ï‡ßá‡¶∂‡¶®‡ßá **‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶æ‡¶∞ ‡¶∏‡ßç‡¶ü‡ßá‡¶ü (Server State)** ‡¶Æ‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶ú ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶è‡¶ï‡¶ü‡¶ø ‡¶∂‡¶ï‡ßç‡¶§‡¶ø‡¶∂‡¶æ‡¶≤‡ßÄ ‡¶≤‡¶æ‡¶á‡¶¨‡ßç‡¶∞‡ßá‡¶∞‡¶ø‡•§ ‡¶è‡¶ü‡¶ø ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™‡ßá‡¶∞ ‡¶°‡ßá‡¶ü‡¶æ ‡¶´‡ßá‡¶ö‡¶ø‡¶Ç (fetching), ‡¶ï‡ßç‡¶Ø‡¶æ‡¶∂‡¶ø‡¶Ç (caching), ‡¶∏‡¶ø‡¶ô‡ßç‡¶ï‡ßç‡¶∞‡ßã‡¶®‡¶æ‡¶á‡¶ú‡ßá‡¶∂‡¶® (synchronizing) ‡¶è‡¶¨‡¶Ç ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶æ‡¶∞ ‡¶∏‡ßç‡¶ü‡ßá‡¶ü ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶ï‡¶æ‡¶ú‡¶ï‡ßá ‡¶Ö‡¶®‡ßá‡¶ï ‡¶∏‡¶π‡¶ú ‡¶ï‡¶∞‡ßá ‡¶¶‡ßá‡ßü‡•§

### ‡¶ï‡ßá‡¶® ‡¶è‡¶ü‡¶ø ‡¶Ü‡¶ß‡ßÅ‡¶®‡¶ø‡¶ï ‡¶™‡ßç‡¶∞‡¶ú‡ßá‡¶ï‡ßç‡¶ü‡ßá ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü?

‡¶∏‡¶æ‡¶ß‡¶æ‡¶∞‡¶£‡¶§ `useEffect` ‡¶è‡¶¨‡¶Ç `useState` ‡¶¶‡¶ø‡ßü‡ßá ‡¶°‡ßá‡¶ü‡¶æ ‡¶´‡ßá‡¶ö ‡¶ï‡¶∞‡¶§‡ßá ‡¶ó‡ßá‡¶≤‡ßá ‡¶Ü‡¶™‡¶®‡¶æ‡¶ï‡ßá ‡¶≤‡ßã‡¶°‡¶ø‡¶Ç ‡¶∏‡ßç‡¶ü‡ßá‡¶ü, ‡¶è‡¶∞‡¶∞ ‡¶π‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶°‡¶≤‡¶ø‡¶Ç, ‡¶è‡¶¨‡¶Ç ‡¶°‡ßá‡¶ü‡¶æ ‡¶ï‡ßç‡¶Ø‡¶æ‡¶∂‡¶ø‡¶Ç ‡¶Æ‡ßç‡¶Ø‡¶æ‡¶®‡ßÅ‡ßü‡¶æ‡¶≤‡¶ø ‡¶π‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶°‡ßá‡¶≤ ‡¶ï‡¶∞‡¶§‡ßá ‡¶π‡ßü‡•§ TanStack Query ‡¶è‡¶á ‡¶∏‡¶¨ ‡¶ï‡¶æ‡¶ú ‡¶Ö‡¶ü‡ßã‡¶Æ‡ßá‡¶ü‡¶ø‡¶ï‡ßç‡¶Ø‡¶æ‡¶≤‡¶ø ‡¶ï‡¶∞‡ßá ‡¶¶‡ßá‡ßü‡•§ ‡¶è‡¶ü‡¶ø ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™‡¶ï‡ßá ‡¶´‡¶æ‡¶∏‡ßç‡¶ü ‡¶ï‡¶∞‡ßá ‡¶è‡¶¨‡¶Ç ‡¶ï‡ßã‡¶°‡¶ï‡ßá ‡¶ï‡ßç‡¶≤‡¶ø‡¶® ‡¶∞‡¶æ‡¶ñ‡ßá‡•§

### ‡¶ï‡¶ñ‡¶® ‡¶è‡¶ü‡¶ø ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶¨‡ßá‡¶®?

‡¶Ø‡¶ñ‡¶®‡¶á ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™‡ßá ‡¶ï‡ßã‡¶®‡ßã ‡¶è‡¶ï‡ßç‡¶∏‡¶ü‡¶æ‡¶∞‡ßç‡¶®‡¶æ‡¶≤ API ‡¶•‡ßá‡¶ï‡ßá ‡¶°‡ßá‡¶ü‡¶æ ‡¶Ü‡¶®‡¶æ‡¶∞ ‡¶™‡ßç‡¶∞‡ßü‡ßã‡¶ú‡¶® ‡¶π‡¶¨‡ßá, ‡¶§‡¶ñ‡¶® TanStack Query ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ ‡¶â‡¶ö‡¶ø‡¶§‡•§ ‡¶§‡¶¨‡ßá ‡¶Ø‡¶¶‡¶ø ‡¶∂‡ßÅ‡¶ß‡ßÅ ‡¶ï‡ßç‡¶≤‡¶æ‡ßü‡ßá‡¶®‡ßç‡¶ü ‡¶∏‡¶æ‡¶á‡¶° ‡¶∏‡ßç‡¶ü‡ßá‡¶ü (‡¶Ø‡ßá‡¶Æ‡¶®: ‡¶Æ‡¶°‡¶æ‡¶≤ ‡¶ì‡¶™‡ßá‡¶®/‡¶ï‡ßç‡¶≤‡ßã‡¶ú, ‡¶´‡¶∞‡ßç‡¶Æ ‡¶á‡¶®‡¶™‡ßÅ‡¶ü) ‡¶Æ‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶ú ‡¶ï‡¶∞‡¶§‡ßá ‡¶π‡ßü, ‡¶§‡¶ñ‡¶® `useState` ‡¶¨‡¶æ Zustand/Redux ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ ‡¶≠‡¶æ‡¶≤‡ßã‡•§

---

## ‡ß®. ‡¶ï‡ßã‡¶∞ ‡¶ï‡¶®‡¶∏‡ßá‡¶™‡ßç‡¶ü (Core Concepts)

‡¶è‡¶á ‡ß´‡¶ü‡¶ø ‡¶Æ‡ßÇ‡¶≤ ‡¶¨‡¶ø‡¶∑‡ßü ‡¶¨‡ßÅ‡¶ù‡¶≤‡ßá ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø TanStack Query ‡¶∂‡ßá‡¶ñ‡¶æ ‡¶™‡¶æ‡¶®‡¶ø‡¶∞ ‡¶Æ‡¶§‡ßã ‡¶∏‡¶π‡¶ú ‡¶π‡ßü‡ßá ‡¶Ø‡¶æ‡¶¨‡ßá:

1.  **Query (‡¶ï‡ßÅ‡ßü‡ßá‡¶∞‡¶ø):** ‡¶°‡ßá‡¶ü‡¶æ ‡¶®‡¶ø‡ßü‡ßá ‡¶Ü‡¶∏‡¶æ‡¶∞ ‡¶™‡ßç‡¶∞‡¶ï‡ßç‡¶∞‡¶ø‡ßü‡¶æ‡•§ ‡¶Ø‡ßá‡¶Æ‡¶®: ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶æ‡¶∞ ‡¶•‡ßá‡¶ï‡ßá ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶≤‡¶ø‡¶∏‡ßç‡¶ü ‡¶Ü‡¶®‡¶æ‡•§ (GET request)
2.  **Mutation (‡¶Æ‡¶ø‡¶â‡¶ü‡ßá‡¶∂‡¶®):** ‡¶°‡ßá‡¶ü‡¶æ ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶® ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶™‡ßç‡¶∞‡¶ï‡ßç‡¶∞‡¶ø‡ßü‡¶æ‡•§ ‡¶Ø‡ßá‡¶Æ‡¶®: ‡¶®‡¶§‡ßÅ‡¶® ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡¶æ, ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶¨‡¶æ ‡¶°‡¶ø‡¶≤‡¶ø‡¶ü ‡¶ï‡¶∞‡¶æ‡•§ (POST, PUT, DELETE requests)
3.  **Query Key (‡¶ï‡ßÅ‡ßü‡ßá‡¶∞‡¶ø ‡¶ï‡¶ø):** ‡¶™‡ßç‡¶∞‡¶§‡¶ø‡¶ü‡¶ø ‡¶ï‡ßÅ‡ßü‡ßá‡¶∞‡¶ø‡¶∞ ‡¶è‡¶ï‡¶ü‡¶ø ‡¶á‡¶â‡¶®‡¶ø‡¶ï ‡¶®‡¶æ‡¶Æ ‡¶¨‡¶æ ID‡•§ TanStack Query ‡¶è‡¶á ‡¶ï‡¶ø (Key) ‡¶¶‡¶ø‡ßü‡ßá ‡¶°‡ßá‡¶ü‡¶æ ‡¶ö‡¶ø‡¶®‡ßá ‡¶∞‡¶æ‡¶ñ‡ßá ‡¶è‡¶¨‡¶Ç ‡¶ï‡ßç‡¶Ø‡¶æ‡¶∂ (Cache) ‡¶ï‡¶∞‡ßá‡•§
4.  **Stale Time (‡¶∏‡ßç‡¶ü‡ßá‡¶ü ‡¶ü‡¶æ‡¶á‡¶Æ):** ‡¶ï‡¶§‡¶ï‡ßç‡¶∑‡¶£ ‡¶™‡¶∞‡ßç‡¶Ø‡¶®‡ßç‡¶§ ‡¶°‡ßá‡¶ü‡¶æ "‡¶´‡ßç‡¶∞‡ßá‡¶∂" ‡¶¨‡¶æ ‡¶∏‡¶§‡ßá‡¶ú ‡¶•‡¶æ‡¶ï‡¶¨‡ßá‡•§ ‡¶è‡¶á ‡¶∏‡¶Æ‡ßü‡ßá‡¶∞ ‡¶Æ‡¶ß‡ßç‡¶Ø‡ßá ‡¶®‡¶§‡ßÅ‡¶® ‡¶ï‡¶∞‡ßá ‡¶´‡ßá‡¶ö ‡¶π‡¶¨‡ßá ‡¶®‡¶æ, ‡¶ï‡ßç‡¶Ø‡¶æ‡¶∂ ‡¶•‡ßá‡¶ï‡ßá ‡¶°‡ßá‡¶ü‡¶æ ‡¶¶‡ßá‡¶ñ‡¶æ‡¶¨‡ßá‡•§
5.  **Invalidation (‡¶á‡¶®‡¶≠‡ßç‡¶Ø‡¶æ‡¶≤‡¶ø‡¶°‡ßá‡¶∂‡¶®):** ‡¶Ø‡¶ñ‡¶® ‡¶Ü‡¶Æ‡¶∞‡¶æ ‡¶ú‡¶æ‡¶®‡¶ø ‡¶Ø‡ßá ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶æ‡¶∞‡ßá‡¶∞ ‡¶°‡ßá‡¶ü‡¶æ ‡¶ö‡ßá‡¶û‡ßç‡¶ú ‡¶π‡ßü‡ßá‡¶õ‡ßá (‡¶Ø‡ßá‡¶Æ‡¶® ‡¶®‡¶§‡ßÅ‡¶® ‡¶™‡ßã‡¶∏‡ßç‡¶ü ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶™‡¶∞), ‡¶§‡¶ñ‡¶® ‡¶™‡ßÅ‡¶∞‡¶®‡ßã ‡¶ï‡ßç‡¶Ø‡¶æ‡¶∂ ‡¶ï‡¶∞‡¶æ ‡¶°‡ßá‡¶ü‡¶æ‡¶ï‡ßá "‡¶¨‡¶æ‡¶§‡¶ø‡¶≤" ‡¶¨‡¶æ stale ‡¶ò‡ßã‡¶∑‡¶£‡¶æ ‡¶ï‡¶∞‡¶æ, ‡¶Ø‡¶æ‡¶§‡ßá ‡¶Ö‡¶ü‡ßã‡¶Æ‡ßá‡¶ü‡¶ø‡¶ï ‡¶®‡¶§‡ßÅ‡¶® ‡¶°‡ßá‡¶ü‡¶æ ‡¶´‡ßá‡¶ö ‡¶π‡ßü‡•§

**Mental Model:** ‡¶≠‡¶æ‡¶¨‡ßÅ‡¶® TanStack Query ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™ ‡¶è‡¶¨‡¶Ç ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶æ‡¶∞‡ßá‡¶∞ ‡¶Æ‡¶æ‡¶ù‡¶ñ‡¶æ‡¶®‡ßá ‡¶è‡¶ï‡¶ü‡¶ø ‡¶∏‡ßç‡¶Æ‡¶æ‡¶∞‡ßç‡¶ü ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶∏‡¶ø‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶ü‡•§ ‡¶Ü‡¶™‡¶®‡¶ø ‡¶Ø‡¶ñ‡¶® ‡¶°‡ßá‡¶ü‡¶æ ‡¶ö‡¶æ‡¶®, ‡¶∏‡ßá ‡¶™‡ßç‡¶∞‡¶•‡¶Æ‡ßá ‡¶¶‡ßá‡¶ñ‡ßá ‡¶§‡¶æ‡¶∞ ‡¶ï‡¶æ‡¶õ‡ßá (Cache-‡¶è) ‡¶Ü‡¶õ‡ßá ‡¶ï‡¶ø‡¶®‡¶æ‡•§ ‡¶•‡¶æ‡¶ï‡¶≤‡ßá ‡¶∏‡¶æ‡¶•‡ßá ‡¶∏‡¶æ‡¶•‡ßá ‡¶¶‡¶ø‡ßü‡ßá ‡¶¶‡ßá‡ßü, ‡¶Ü‡¶∞ ‡¶®‡¶æ ‡¶•‡¶æ‡¶ï‡¶≤‡ßá ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶æ‡¶∞ ‡¶•‡ßá‡¶ï‡ßá ‡¶è‡¶®‡ßá ‡¶¶‡ßá‡ßü ‡¶è‡¶¨‡¶Ç ‡¶®‡¶ø‡¶ú‡ßá‡¶∞ ‡¶ï‡¶æ‡¶õ‡ßá ‡¶ï‡¶™‡¶ø ‡¶∞‡ßá‡¶ñ‡ßá ‡¶¶‡ßá‡ßü‡•§

---

## ‡ß©. ‡¶™‡ßç‡¶∞‡ßç‡¶Ø‡¶æ‡¶ï‡¶ü‡¶ø‡¶ï‡ßç‡¶Ø‡¶æ‡¶≤ ‡¶∏‡ßá‡¶ü‡¶Ü‡¶™ (Practical Setup)

‡¶Ü‡¶Æ‡¶∞‡¶æ **Next.js (App Router)** ‡¶è‡¶¨‡¶Ç **JavaScript** ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶¨‡•§

### ‡ßß. ‡¶á‡¶®‡¶∏‡ßç‡¶ü‡¶≤‡ßá‡¶∂‡¶®

‡¶ü‡¶æ‡¶∞‡ßç‡¶Æ‡¶ø‡¶®‡¶æ‡¶≤‡ßá ‡¶è‡¶á ‡¶ï‡¶Æ‡¶æ‡¶®‡ßç‡¶°‡¶ü‡¶ø ‡¶∞‡¶æ‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®:

```bash
npm install @tanstack/react-query
```

### ‡ß®. ‡¶´‡ßã‡¶≤‡ßç‡¶°‡¶æ‡¶∞ ‡¶∏‡ßç‡¶ü‡ßç‡¶∞‡¶æ‡¶ï‡¶ö‡¶æ‡¶∞ (Scalable Project)

‡¶è‡¶ï‡¶ü‡¶ø ‡¶™‡ßç‡¶∞‡¶´‡ßá‡¶∂‡¶®‡¶æ‡¶≤ ‡¶™‡ßç‡¶∞‡¶ú‡ßá‡¶ï‡ßç‡¶ü‡ßá ‡¶´‡¶æ‡¶á‡¶≤‡¶ó‡ßÅ‡¶≤‡ßã ‡¶è‡¶≠‡¶æ‡¶¨‡ßá ‡¶∏‡¶æ‡¶ú‡¶æ‡¶®‡ßã ‡¶â‡¶ö‡¶ø‡¶§:

```
src/
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îú‚îÄ‚îÄ providers.js       # QueryClientProvider ‡¶∏‡ßá‡¶ü‡¶Ü‡¶™
‚îÇ   ‚îú‚îÄ‚îÄ layout.js          # ‡¶ó‡ßç‡¶≤‡ßã‡¶¨‡¶æ‡¶≤ ‡¶≤‡ßá‡¶Ü‡¶â‡¶ü
‚îÇ   ‚îî‚îÄ‚îÄ page.js            # ‡¶π‡ßã‡¶Æ ‡¶™‡ßá‡¶ú
‚îú‚îÄ‚îÄ components/            # UI ‡¶ï‡¶Æ‡ßç‡¶™‡ßã‡¶®‡ßá‡¶®‡ßç‡¶ü
‚îú‚îÄ‚îÄ hooks/                 # ‡¶ï‡¶æ‡¶∏‡ßç‡¶ü‡¶Æ ‡¶π‡ßÅ‡¶ï‡¶∏ (‡¶∏‡¶¨ ‡¶ï‡ßÅ‡ßü‡ßá‡¶∞‡¶ø ‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶•‡¶æ‡¶ï‡¶¨‡ßá)
‚îÇ   ‚îú‚îÄ‚îÄ useTodos.js
‚îÇ   ‚îî‚îÄ‚îÄ useUser.js
‚îú‚îÄ‚îÄ services/              # API ‡¶ï‡¶≤ ‡¶´‡¶æ‡¶Ç‡¶∂‡¶® (Axios ‡¶¨‡¶æ Fetch)
‚îÇ   ‚îú‚îÄ‚îÄ api.js             # Axios ‡¶á‡¶®‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶∏
‚îÇ   ‚îî‚îÄ‚îÄ todoService.js     # ‡¶®‡¶ø‡¶∞‡ßç‡¶¶‡¶ø‡¶∑‡ßç‡¶ü ‡¶´‡¶ø‡¶ö‡¶æ‡¶∞‡ßá‡¶∞ API ‡¶ï‡¶≤
‚îî‚îÄ‚îÄ utils/                 # ‡¶á‡¶â‡¶ü‡¶ø‡¶≤‡¶ø‡¶ü‡¶ø ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®
```

### ‡ß©. ‡¶ï‡¶®‡¶´‡¶ø‡¶ó‡¶æ‡¶∞‡ßá‡¶∂‡¶® (Providers Setup)

Next.js App Router-‡¶è `QueryClientProvider` ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶è‡¶ï‡¶ü‡¶ø ‡¶Ü‡¶≤‡¶æ‡¶¶‡¶æ ‡¶ï‡ßç‡¶≤‡¶æ‡ßü‡ßá‡¶®‡ßç‡¶ü ‡¶ï‡¶Æ‡ßç‡¶™‡ßã‡¶®‡ßá‡¶®‡ßç‡¶ü ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡¶§‡ßá ‡¶π‡ßü‡•§

**`src/app/providers.js`**

```javascript
"use client";

import { QueryClient, QueryClientProvider } from "@tanstack/react-query";
import { ReactQueryDevtools } from "@tanstack/react-query-devtools";
import { useState } from "react";

export default function Providers({ children }) {
  // useState ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ ‡¶ú‡¶∞‡ßÅ‡¶∞‡¶ø ‡¶Ø‡¶æ‡¶§‡ßá ‡¶∞‡¶ø-‡¶∞‡ßá‡¶®‡ßç‡¶°‡¶æ‡¶∞‡ßá ‡¶ï‡ßç‡¶≤‡¶æ‡ßü‡ßá‡¶®‡ßç‡¶ü ‡¶∞‡¶ø‡¶∏‡ßá‡¶ü ‡¶®‡¶æ ‡¶π‡ßü
  const [queryClient] = useState(
    () =>
      new QueryClient({
        defaultOptions: {
          queries: {
            staleTime: 60 * 1000, // ‡ßß ‡¶Æ‡¶ø‡¶®‡¶ø‡¶ü ‡¶™‡¶∞‡ßç‡¶Ø‡¶®‡ßç‡¶§ ‡¶°‡ßá‡¶ü‡¶æ ‡¶´‡ßç‡¶∞‡ßá‡¶∂ ‡¶•‡¶æ‡¶ï‡¶¨‡ßá
          },
        },
      })
  );

  return (
    <QueryClientProvider client={queryClient}>
      {children}
      {/* DevTools ‡¶°‡¶ø‡¶´‡¶≤‡ßç‡¶ü‡¶≠‡¶æ‡¶¨‡ßá ‡¶™‡ßç‡¶∞‡ßã‡¶°‡¶æ‡¶ï‡¶∂‡¶®‡ßá ‡¶¨‡¶®‡ßç‡¶ß ‡¶•‡¶æ‡¶ï‡ßá */}
      <ReactQueryDevtools initialIsOpen={false} />
    </QueryClientProvider>
  );
}
```

> **Note:** `ReactQueryDevtools` ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶Ü‡¶™‡¶®‡¶æ‡¶ï‡ßá ‡¶è‡¶ü‡¶ø ‡¶á‡¶Æ‡¶™‡ßã‡¶∞‡ßç‡¶ü ‡¶ï‡¶∞‡¶§‡ßá ‡¶π‡¶¨‡ßá:
> `import { ReactQueryDevtools } from '@tanstack/react-query-devtools';`
> ‡¶è‡¶¨‡¶Ç `npm install @tanstack/react-query-devtools` ‡¶ï‡¶Æ‡¶æ‡¶®‡ßç‡¶° ‡¶¶‡¶ø‡ßü‡ßá ‡¶á‡¶®‡¶∏‡ßç‡¶ü‡¶≤ ‡¶ï‡¶∞‡¶§‡ßá ‡¶π‡¶¨‡ßá‡•§

**`src/app/layout.js`**

```javascript
import Providers from "./providers";
import "./globals.css";

export default function RootLayout({ children }) {
  return (
    <html lang="en">
      <body>
        <Providers>{children}</Providers>
      </body>
    </html>
  );
}
```

---

## ‡ß™. ‡¶™‡ßç‡¶∞‡¶´‡ßá‡¶∂‡¶®‡¶æ‡¶≤ ‡¶ï‡ßã‡¶° ‡¶Ö‡¶∞‡ßç‡¶ó‡¶æ‡¶®‡¶æ‡¶á‡¶ú‡ßá‡¶∂‡¶® (Professional Code Organization)

‡¶ï‡ßã‡¶° ‡¶Ö‡¶ó‡ßã‡¶õ‡¶æ‡¶≤‡ßã ‡¶®‡¶æ ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶Ü‡¶Æ‡¶∞‡¶æ **Service Layer Pattern** ‡¶è‡¶¨‡¶Ç **Custom Hooks** ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶¨‡•§

### ‚úÖ Service Layer (API Calls)

‡¶∏‡¶∞‡¶æ‡¶∏‡¶∞‡¶ø ‡¶ï‡¶Æ‡ßç‡¶™‡ßã‡¶®‡ßá‡¶®‡ßç‡¶ü‡ßá `fetch` ‡¶¨‡¶æ `axios` ‡¶ï‡¶≤ ‡¶ï‡¶∞‡¶¨‡ßá‡¶® ‡¶®‡¶æ‡•§ ‡¶è‡¶ó‡ßÅ‡¶≤‡ßã `services` ‡¶´‡ßã‡¶≤‡ßç‡¶°‡¶æ‡¶∞‡ßá ‡¶∞‡¶æ‡¶ñ‡ßÅ‡¶®‡•§

**`src/services/todoService.js`**

```javascript
import axios from "axios";

const API_URL = "https://jsonplaceholder.typicode.com/todos";

export const fetchTodos = async () => {
  const { data } = await axios.get(API_URL);
  return data;
};

export const createTodo = async (newTodo) => {
  const { data } = await axios.post(API_URL, newTodo);
  return data;
};
```

### ‚úÖ Custom Hooks (TanStack Query Logic)

‡¶∏‡¶¨ `useQuery` ‡¶è‡¶¨‡¶Ç `useMutation` ‡¶≤‡¶ú‡¶ø‡¶ï `hooks` ‡¶´‡ßã‡¶≤‡ßç‡¶°‡¶æ‡¶∞‡ßá ‡¶•‡¶æ‡¶ï‡¶¨‡ßá‡•§ ‡¶è‡¶§‡ßá UI ‡¶ï‡ßç‡¶≤‡¶ø‡¶® ‡¶•‡¶æ‡¶ï‡ßá‡•§

**`src/hooks/useTodos.js`**

```javascript
import { useQuery, useMutation, useQueryClient } from "@tanstack/react-query";
import { fetchTodos, createTodo } from "@/services/todoService";

// ‡¶ï‡ßÅ‡ßü‡ßá‡¶∞‡¶ø ‡¶ï‡¶ø (Key) ‡¶ï‡¶®‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶ü ‡¶π‡¶ø‡¶∏‡ßá‡¶¨‡ßá ‡¶∞‡¶æ‡¶ñ‡¶æ ‡¶≠‡¶æ‡¶≤‡ßã ‡¶™‡ßç‡¶∞‡ßç‡¶Ø‡¶æ‡¶ï‡¶ü‡¶ø‡¶∏
export const TODO_KEYS = {
  all: ["todos"],
};

export const useGetTodos = () => {
  return useQuery({
    queryKey: TODO_KEYS.all,
    queryFn: fetchTodos,
  });
};

export const useCreateTodo = () => {
  const queryClient = useQueryClient();

  return useMutation({
    mutationFn: createTodo,
    onSuccess: () => {
      // ‡¶®‡¶§‡ßÅ‡¶® ‡¶ü‡ßÅ‡¶°‡ßÅ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶° ‡¶π‡¶≤‡ßá ‡¶≤‡¶ø‡¶∏‡ßç‡¶ü ‡¶∞‡¶ø‡¶´‡ßç‡¶∞‡ßá‡¶∂ ‡¶π‡¶¨‡ßá
      queryClient.invalidateQueries({ queryKey: TODO_KEYS.all });
    },
  });
};
```

---

## ‡ß´. ‡¶Æ‡¶°‡¶æ‡¶∞‡ßç‡¶® ‡¶∏‡¶ø‡¶®‡¶ü‡ßç‡¶Ø‡¶æ‡¶ï‡ßç‡¶∏ ‡¶ì ‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶°‡¶æ‡¶∞‡ßç‡¶° (Modern Syntax)

- **Async/Await:** ‡¶∏‡¶¨‡¶∏‡¶Æ‡ßü `async/await` ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßÅ‡¶®, `.then()` ‡¶ö‡ßá‡¶á‡¶® ‡¶™‡¶∞‡¶ø‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§
- **Arrow Functions:** ‡¶´‡¶æ‡¶Ç‡¶∂‡¶® ‡¶°‡¶ø‡¶´‡¶æ‡¶á‡¶® ‡¶ï‡¶∞‡¶§‡ßá ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶∞‡ßã ‡¶´‡¶æ‡¶Ç‡¶∂‡¶® ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§
- **Error Handling:** `try/catch` ‡¶¨‡ßç‡¶≤‡¶ï‡ßá‡¶∞ ‡¶ö‡ßá‡ßü‡ßá TanStack Query-‡¶∞ ‡¶¨‡¶ø‡¶≤‡ßç‡¶ü-‡¶á‡¶® `isError` ‡¶è‡¶¨‡¶Ç `error` ‡¶Ö‡¶¨‡¶ú‡ßá‡¶ï‡ßç‡¶ü ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ ‡¶¨‡ßá‡¶∂‡¶ø ‡¶∏‡ßÅ‡¶¨‡¶ø‡¶ß‡¶æ‡¶ú‡¶®‡¶ï‡•§

---

## ‡ß¨. ‡¶ï‡ßã‡¶° ‡¶è‡¶ï‡ßç‡¶∏‡¶æ‡¶Æ‡ßç‡¶™‡¶≤ (Real-world Use Cases: A to Z Implementation)

‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶Ü‡¶Æ‡¶∞‡¶æ ‡¶è‡¶ï‡¶ü‡¶ø **Todo List** ‡¶´‡¶ø‡¶ö‡¶æ‡¶∞ ‡¶á‡¶Æ‡¶™‡ßç‡¶≤‡¶ø‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶ï‡¶∞‡¶¨ ‡¶è‡¶ï‡¶¶‡¶Æ ‡¶™‡ßç‡¶∞‡ßã‡¶°‡¶æ‡¶ï‡¶∂‡¶® ‡¶ó‡ßç‡¶∞‡ßá‡¶° ‡¶Ü‡¶∞‡ßç‡¶ï‡¶ø‡¶ü‡ßá‡¶ï‡¶ö‡¶æ‡¶∞ ‡¶´‡¶≤‡ßã ‡¶ï‡¶∞‡ßá‡•§ ‡¶Ü‡¶Æ‡¶∞‡¶æ ‡¶¶‡ßá‡¶ñ‡¶¨ ‡¶ï‡¶ø‡¶≠‡¶æ‡¶¨‡ßá `services`, `hooks`, ‡¶è‡¶¨‡¶Ç `components` ‡¶è‡¶ï‡ßá ‡¶Ö‡¶™‡¶∞‡ßá‡¶∞ ‡¶∏‡¶æ‡¶•‡ßá ‡¶ï‡¶æ‡¶®‡ßá‡¶ï‡ßç‡¶ü‡ßá‡¶° ‡¶•‡¶æ‡¶ï‡ßá‡•§

### ‡¶ß‡¶æ‡¶™ ‡ßß: Axios Instance ‡¶∏‡ßá‡¶ü‡¶Ü‡¶™ (Services)

‡¶™‡ßç‡¶∞‡¶•‡¶Æ‡ßá ‡¶Ü‡¶Æ‡¶∞‡¶æ ‡¶è‡¶ï‡¶ü‡¶ø ‡¶ó‡ßç‡¶≤‡ßã‡¶¨‡¶æ‡¶≤ Axios ‡¶á‡¶®‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶∏ ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡¶¨ ‡¶Ø‡¶æ‡¶§‡ßá ‡¶¨‡¶æ‡¶∞‡¶¨‡¶æ‡¶∞ ‡¶¨‡ßá‡¶∏ URL ‡¶≤‡¶ø‡¶ñ‡¶§‡ßá ‡¶®‡¶æ ‡¶π‡ßü‡•§

**`src/services/api.js`**

```javascript
import axios from "axios";

const api = axios.create({
  baseURL: "https://jsonplaceholder.typicode.com",
  headers: {
    "Content-Type": "application/json",
  },
});

export default api;
```

### ‡¶ß‡¶æ‡¶™ ‡ß®: API Calls ‡¶°‡¶ø‡¶´‡¶æ‡¶á‡¶® ‡¶ï‡¶∞‡¶æ (Services)

‡¶è‡¶ñ‡¶® ‡¶Ü‡¶Æ‡¶∞‡¶æ `todoService.js` ‡¶´‡¶æ‡¶á‡¶≤‡ßá ‡¶∏‡ßç‡¶™‡ßá‡¶∏‡¶ø‡¶´‡¶ø‡¶ï API ‡¶ï‡¶≤‡¶ó‡ßÅ‡¶≤‡ßã ‡¶≤‡¶ø‡¶ñ‡¶¨‡•§ ‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶Ü‡¶Æ‡¶∞‡¶æ ‡¶Ü‡¶Æ‡¶æ‡¶¶‡ßá‡¶∞ ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡¶æ `api` ‡¶á‡¶®‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶∏ ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶¨‡•§

**`src/services/todoService.js`**

```javascript
import api from "./api";

// ‡¶∏‡¶¨ ‡¶ü‡ßÅ‡¶°‡ßÅ ‡¶Ü‡¶®‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø
export const fetchTodos = async () => {
  const { data } = await api.get("/todos?_limit=10"); // ‡¶°‡ßá‡¶Æ‡ßã‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡ßß‡ß¶‡¶ü‡¶æ ‡¶≤‡¶ø‡¶Æ‡¶ø‡¶ü ‡¶¶‡¶ø‡¶≤‡¶æ‡¶Æ
  return data;
};

// ‡¶®‡¶§‡ßÅ‡¶® ‡¶ü‡ßÅ‡¶°‡ßÅ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶° ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø
export const createTodo = async (newTodo) => {
  const { data } = await api.post("/todos", newTodo);
  return data;
};

// ‡¶ü‡ßÅ‡¶°‡ßÅ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø (‡¶Ø‡ßá‡¶Æ‡¶®: completed ‡¶Æ‡¶æ‡¶∞‡ßç‡¶ï ‡¶ï‡¶∞‡¶æ)
export const updateTodo = async ({ id, ...updates }) => {
  const { data } = await api.patch(`/todos/${id}`, updates);
  return data;
};
```

### ‡¶ß‡¶æ‡¶™ ‡ß©: Custom Hooks ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡¶æ (Hooks)

‡¶è‡¶ñ‡¶® ‡¶Ü‡¶Æ‡¶∞‡¶æ TanStack Query ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßá ‡¶è‡¶á ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶ø‡¶∏‡¶ó‡ßÅ‡¶≤‡ßã‡¶ï‡ßá ‡¶π‡ßÅ‡¶ï‡ßá ‡¶ï‡¶®‡¶≠‡¶æ‡¶∞‡ßç‡¶ü ‡¶ï‡¶∞‡¶¨‡•§

**`src/hooks/useTodos.js`**

```javascript
import { useQuery, useMutation, useQueryClient } from "@tanstack/react-query";
import { fetchTodos, createTodo, updateTodo } from "@/services/todoService";

// Query Key ‡¶´‡ßç‡¶Ø‡¶æ‡¶ï‡ßç‡¶ü‡¶∞‡¶ø (Best Practice)
export const TODO_KEYS = {
  all: ["todos"],
  detail: (id) => ["todos", id],
};

// ‡ßß. ‡¶°‡ßá‡¶ü‡¶æ ‡¶´‡ßá‡¶ö ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶π‡ßÅ‡¶ï
export const useGetTodos = () => {
  return useQuery({
    queryKey: TODO_KEYS.all,
    queryFn: fetchTodos,
  });
};

// ‡ß®. ‡¶°‡ßá‡¶ü‡¶æ ‡¶ï‡ßç‡¶∞‡¶ø‡ßü‡ßá‡¶ü ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶π‡ßÅ‡¶ï
export const useCreateTodo = () => {
  const queryClient = useQueryClient();

  return useMutation({
    mutationFn: createTodo,
    onSuccess: () => {
      // ‡¶®‡¶§‡ßÅ‡¶® ‡¶°‡ßá‡¶ü‡¶æ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶° ‡¶π‡¶≤‡ßá ‡¶≤‡¶ø‡¶∏‡ßç‡¶ü ‡¶∞‡¶ø‡¶´‡ßç‡¶∞‡ßá‡¶∂ ‡¶π‡¶¨‡ßá
      queryClient.invalidateQueries({ queryKey: TODO_KEYS.all });
    },
  });
};

// ‡ß©. ‡¶°‡ßá‡¶ü‡¶æ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶π‡ßÅ‡¶ï
export const useUpdateTodo = () => {
  const queryClient = useQueryClient();

  return useMutation({
    mutationFn: updateTodo,
    onSuccess: () => {
      queryClient.invalidateQueries({ queryKey: TODO_KEYS.all });
    },
  });
};
```

### ‡¶ß‡¶æ‡¶™ ‡ß™: UI ‡¶ï‡¶Æ‡ßç‡¶™‡ßã‡¶®‡ßá‡¶®‡ßç‡¶ü‡ßá ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ (Components/Page)

‡¶´‡¶æ‡¶á‡¶®‡¶æ‡¶≤‡¶ø, ‡¶Ü‡¶Æ‡¶∞‡¶æ ‡¶Ü‡¶Æ‡¶æ‡¶¶‡ßá‡¶∞ ‡¶™‡ßá‡¶ú‡ßá ‡¶è‡¶á ‡¶π‡ßÅ‡¶ï‡¶ó‡ßÅ‡¶≤‡ßã ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶¨‡•§ ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶® ‡¶ï‡ßã‡¶° ‡¶ï‡¶§ ‡¶ï‡ßç‡¶≤‡¶ø‡¶® ‡¶•‡¶æ‡¶ï‡ßá!

**`src/app/page.js`**

```javascript
"use client";

import { useState } from "react";
import { useGetTodos, useCreateTodo, useUpdateTodo } from "@/hooks/useTodos";

export default function TodoPage() {
  // ‡¶π‡ßÅ‡¶ï‡¶∏ ‡¶ï‡¶≤ ‡¶ï‡¶∞‡¶æ
  const { data: todos, isLoading, isError, error } = useGetTodos();
  const { mutate: addTodo, isPending: isAdding } = useCreateTodo();
  const { mutate: toggleTodo } = useUpdateTodo();

  const [title, setTitle] = useState("");

  // ‡¶´‡¶∞‡ßç‡¶Æ ‡¶∏‡¶æ‡¶¨‡¶Æ‡¶ø‡¶ü ‡¶π‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶°‡¶≤‡¶æ‡¶∞
  const handleSubmit = (e) => {
    e.preventDefault();
    if (!title) return;

    addTodo(
      { title, completed: false, userId: 1 },
      {
        onSuccess: () => {
          setTitle(""); // ‡¶∏‡¶´‡¶≤ ‡¶π‡¶≤‡ßá ‡¶á‡¶®‡¶™‡ßÅ‡¶ü ‡¶ï‡ßç‡¶≤‡¶ø‡ßü‡¶æ‡¶∞
          alert("Todo added successfully!");
        },
        onError: () => {
          alert("Failed to add todo");
        },
      }
    );
  };

  // ‡¶≤‡ßã‡¶°‡¶ø‡¶Ç ‡¶è‡¶¨‡¶Ç ‡¶è‡¶∞‡¶∞ ‡¶∏‡ßç‡¶ü‡ßá‡¶ü ‡¶π‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶°‡¶≤‡¶ø‡¶Ç
  if (isLoading)
    return <div className="text-center p-10">Loading todos...</div>;
  if (isError)
    return <div className="text-red-500 p-10">Error: {error.message}</div>;

  return (
    <div className="max-w-md mx-auto mt-10 p-6 bg-white rounded-xl shadow-md">
      <h1 className="text-2xl font-bold mb-6 text-gray-800">
        My Professional Todo App
      </h1>

      {/* Add Todo Form */}
      <form onSubmit={handleSubmit} className="flex gap-3 mb-8">
        <input
          type="text"
          value={title}
          onChange={(e) => setTitle(e.target.value)}
          className="border border-gray-300 p-3 flex-1 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-black"
          placeholder="What needs to be done?"
        />
        <button
          type="submit"
          disabled={isAdding}
          className="bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-medium disabled:bg-blue-300 transition-colors"
        >
          {isAdding ? "Adding..." : "Add"}
        </button>
      </form>

      {/* Todo List */}
      <ul className="space-y-3">
        {todos?.map((todo) => (
          <li
            key={todo.id}
            className="p-4 bg-gray-50 border border-gray-100 rounded-lg flex items-center justify-between hover:bg-gray-100 transition-colors"
          >
            <span
              className={`text-gray-700 ${
                todo.completed ? "line-through text-gray-400" : ""
              }`}
            >
              {todo.title}
            </span>

            <button
              onClick={() =>
                toggleTodo({ id: todo.id, completed: !todo.completed })
              }
              className={`text-sm px-3 py-1 rounded-full border ${
                todo.completed
                  ? "text-green-600 border-green-200 bg-green-50"
                  : "text-yellow-600 border-yellow-200 bg-yellow-50"
              }`}
            >
              {todo.completed ? "Completed" : "Mark Done"}
            </button>
          </li>
        ))}
      </ul>
    </div>
  );
}
```

---

## ‡ß≠. ‡¶¨‡ßá‡¶∏‡ßç‡¶ü ‡¶™‡ßç‡¶∞‡ßç‡¶Ø‡¶æ‡¶ï‡¶ü‡¶ø‡¶∏ ‡¶ì ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶ü‡¶ø-‡¶™‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∞‡ßç‡¶® (Best Practices)

### ‚úÖ DO (‡¶ï‡¶ø ‡¶ï‡¶∞‡¶¨‡ßá‡¶®)

1.  **Query Keys Factory:** ‡¶ï‡ßÅ‡ßü‡ßá‡¶∞‡¶ø ‡¶ï‡¶ø‡¶ó‡ßÅ‡¶≤‡ßã ‡¶π‡¶æ‡¶∞‡ßç‡¶°‡¶ï‡ßã‡¶° ‡¶®‡¶æ ‡¶ï‡¶∞‡ßá ‡¶è‡¶ï‡¶ü‡¶ø ‡¶Ö‡¶¨‡¶ú‡ßá‡¶ï‡ßç‡¶ü ‡¶¨‡¶æ ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®‡ßá ‡¶∞‡¶æ‡¶ñ‡ßÅ‡¶® (‡¶Ø‡ßá‡¶Æ‡¶® `TODO_KEYS` ‡¶â‡¶™‡¶∞‡ßá ‡¶¶‡ßá‡¶ñ‡¶æ‡¶®‡ßã ‡¶π‡ßü‡ßá‡¶õ‡ßá)‡•§
2.  **Custom Hooks:** ‡¶∏‡¶¨‡¶∏‡¶Æ‡ßü `useQuery` ‡¶≤‡¶ú‡¶ø‡¶ï ‡¶ï‡¶æ‡¶∏‡ßç‡¶ü‡¶Æ ‡¶π‡ßÅ‡¶ï‡ßá ‡¶∞‚Äç‡ßç‡¶Ø‡¶æ‡¶™ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§
3.  **Loading/Error States:** ‡¶∏‡¶¨‡¶∏‡¶Æ‡ßü ‡¶≤‡ßã‡¶°‡¶ø‡¶Ç ‡¶è‡¶¨‡¶Ç ‡¶è‡¶∞‡¶∞ ‡¶∏‡ßç‡¶ü‡ßá‡¶ü ‡¶π‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶°‡ßá‡¶≤ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§

### ‚ùå DON'T (‡¶ï‡¶ø ‡¶ï‡¶∞‡¶¨‡ßá‡¶® ‡¶®‡¶æ)

1.  **useEffect for Fetching:** ‡¶°‡ßá‡¶ü‡¶æ ‡¶´‡ßá‡¶ö ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø `useEffect` ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶¨‡ßá‡¶® ‡¶®‡¶æ ‡¶Ø‡¶ñ‡¶® ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶π‡¶æ‡¶§‡ßá TanStack Query ‡¶Ü‡¶õ‡ßá‡•§
2.  **Over-fetching:** ‡¶¶‡¶∞‡¶ï‡¶æ‡¶∞ ‡¶®‡ßá‡¶á ‡¶è‡¶Æ‡¶® ‡¶°‡ßá‡¶ü‡¶æ ‡¶´‡ßá‡¶ö ‡¶ï‡¶∞‡¶¨‡ßá‡¶® ‡¶®‡¶æ‡•§
3.  **Destructuring without Rename:** `data` ‡¶ï‡ßá ‡¶∞‡¶ø‡¶®‡ßá‡¶Æ ‡¶ï‡¶∞‡ßá ‡¶Æ‡¶ø‡¶®‡¶ø‡¶Ç‡¶´‡ßÅ‡¶≤ ‡¶®‡¶æ‡¶Æ ‡¶¶‡¶ø‡¶® (‡¶Ø‡ßá‡¶Æ‡¶® `const { data: todos } = ...`)‡•§

---

## ‡ßÆ. ‡¶á‡¶®‡ßç‡¶ü‡¶ø‡¶ó‡ßç‡¶∞‡ßá‡¶∂‡¶® ‡¶ó‡¶æ‡¶á‡¶° (Integration Guide)

Next.js App Router-‡¶è TanStack Query ‡¶Æ‡ßÇ‡¶≤‡¶§ **Client Components**-‡¶è ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡ßÉ‡¶§ ‡¶π‡ßü‡•§ ‡¶§‡¶¨‡ßá ‡¶Ü‡¶™‡¶®‡¶ø ‡¶ö‡¶æ‡¶á‡¶≤‡ßá Server Component-‡¶è ‡¶°‡ßá‡¶ü‡¶æ ‡¶™‡ßç‡¶∞‡¶ø-‡¶´‡ßá‡¶ö (Prefetch) ‡¶ï‡¶∞‡ßá Client Component-‡¶è ‡¶π‡¶æ‡¶á‡¶°‡ßç‡¶∞‡ßá‡¶ü (Hydrate) ‡¶ï‡¶∞‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡ßá‡¶®‡•§ ‡¶è‡¶ü‡¶ø ‡¶è‡¶ï‡¶ü‡ßÅ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶≠‡¶æ‡¶®‡ßç‡¶∏‡¶°, ‡¶§‡¶¨‡ßá ‡¶ú‡ßÅ‡¶®‡¶ø‡¶Ø‡¶º‡¶∞ ‡¶π‡¶ø‡¶∏‡ßá‡¶¨‡ßá ‡¶∂‡ßÅ‡¶∞‡ßÅ‡¶§‡ßá ‡¶ï‡ßç‡¶≤‡¶æ‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶ü ‡¶∏‡¶æ‡¶á‡¶° ‡¶´‡ßá‡¶ö‡¶ø‡¶Ç (‡¶â‡¶™‡¶∞‡ßá ‡¶¶‡ßá‡¶ñ‡¶æ‡¶®‡ßã ‡¶™‡¶¶‡ßç‡¶ß‡¶§‡¶ø) ‡¶ú‡¶æ‡¶®‡¶≤‡ßá‡¶á ‡¶ö‡¶≤‡¶¨‡ßá‡•§

**Tools Integration:**

- **Axios:** API ‡¶ï‡¶≤‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶∏‡ßá‡¶∞‡¶æ‡•§
- **React Hook Form:** ‡¶´‡¶∞‡ßç‡¶Æ ‡¶π‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶°‡¶≤‡¶ø‡¶Ç‡ßü‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø, ‡¶Ø‡¶æ ‡¶Æ‡¶ø‡¶â‡¶ü‡ßá‡¶∂‡¶®‡ßá‡¶∞ ‡¶∏‡¶æ‡¶•‡ßá ‡¶ö‡¶Æ‡ßé‡¶ï‡¶æ‡¶∞ ‡¶ï‡¶æ‡¶ú ‡¶ï‡¶∞‡ßá‡•§
- **Zod:** ‡¶°‡ßá‡¶ü‡¶æ ‡¶≠‡ßç‡¶Ø‡¶æ‡¶≤‡¶ø‡¶°‡ßá‡¶∂‡¶®‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø‡•§

---

## ‡ßØ. ‡¶™‡¶æ‡¶∞‡¶´‡¶∞‡¶Æ‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶∏ ‡¶ì ‡¶Ö‡¶™‡ßç‡¶ü‡¶ø‡¶Æ‡¶æ‡¶á‡¶ú‡ßá‡¶∂‡¶® (Performance)

1.  **Stale Time:** ‡¶°‡¶ø‡¶´‡¶≤‡ßç‡¶ü `staleTime` 0 ‡¶•‡¶æ‡¶ï‡ßá, ‡¶Æ‡¶æ‡¶®‡ßá ‡¶™‡ßç‡¶∞‡¶§‡¶ø‡¶¨‡¶æ‡¶∞ ‡¶â‡¶á‡¶®‡ßç‡¶°‡ßã ‡¶´‡ßã‡¶ï‡¶æ‡¶∏ ‡¶ï‡¶∞‡¶≤‡ßá ‡¶´‡ßá‡¶ö ‡¶π‡¶¨‡ßá‡•§ ‡¶è‡¶ü‡¶ø ‡¶¨‡¶æ‡ßú‡¶ø‡ßü‡ßá (‡¶Ø‡ßá‡¶Æ‡¶® ‡ßß ‡¶Æ‡¶ø‡¶®‡¶ø‡¶ü) ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶æ‡¶∞ ‡¶∞‡¶ø‡¶ï‡ßã‡ßü‡ßá‡¶∏‡ßç‡¶ü ‡¶ï‡¶Æ‡¶æ‡¶®‡ßã ‡¶Ø‡¶æ‡ßü‡•§
2.  **Window Focus Refetching:** ‡¶°‡¶ø‡¶´‡¶≤‡ßç‡¶ü‡¶≠‡¶æ‡¶¨‡ßá ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶Ö‡¶®‡ßç‡¶Ø ‡¶ü‡ßç‡¶Ø‡¶æ‡¶¨‡ßá ‡¶ó‡¶ø‡ßü‡ßá ‡¶´‡¶ø‡¶∞‡ßá ‡¶Ü‡¶∏‡¶≤‡ßá ‡¶°‡ßá‡¶ü‡¶æ ‡¶∞‡¶ø‡¶´‡ßç‡¶∞‡ßá‡¶∂ ‡¶π‡ßü‡•§ ‡¶™‡ßç‡¶∞‡ßü‡ßã‡¶ú‡¶® ‡¶®‡¶æ ‡¶π‡¶≤‡ßá ‡¶è‡¶ü‡¶ø ‡¶¨‡¶®‡ßç‡¶ß ‡¶ï‡¶∞‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡ßá‡¶®: `refetchOnWindowFocus: false`‡•§
3.  **Pagination:** ‡¶¨‡ßú ‡¶≤‡¶ø‡¶∏‡ßç‡¶ü‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø `keepPreviousData: true` (v5 ‡¶è `placeholderData: keepPreviousData`) ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßÅ‡¶® ‡¶Ø‡¶æ‡¶§‡ßá ‡¶™‡ßá‡¶ú ‡¶ö‡ßá‡¶û‡ßç‡¶ú ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶∏‡¶Æ‡ßü ‡¶≤‡ßã‡¶°‡¶ø‡¶Ç ‡¶∏‡ßç‡¶™‡¶ø‡¶®‡¶æ‡¶∞ ‡¶®‡¶æ ‡¶¶‡ßá‡¶ñ‡¶æ‡ßü‡•§

---

## ‡ßß‡ß¶. ‡¶á‡¶®‡ßç‡¶ü‡¶æ‡¶∞‡¶≠‡¶ø‡¶â ‡¶™‡ßç‡¶∞‡¶∏‡ßç‡¶§‡ßÅ‡¶§‡¶ø (Interview-Ready Knowledge)

**Top Questions:**

1.  **TanStack Query ‡¶ï‡ßá‡¶® ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶¨? Redux ‡¶è‡¶∞ ‡¶∏‡¶æ‡¶•‡ßá ‡¶™‡¶æ‡¶∞‡ßç‡¶•‡¶ï‡ßç‡¶Ø ‡¶ï‡ßÄ?**
    - _‡¶â‡¶§‡ßç‡¶§‡¶∞:_ TanStack Query ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶æ‡¶∞ ‡¶∏‡ßç‡¶ü‡ßá‡¶ü (API data) ‡¶Æ‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶ú ‡¶ï‡¶∞‡ßá, ‡¶Ü‡¶∞ Redux ‡¶ï‡ßç‡¶≤‡¶æ‡ßü‡ßá‡¶®‡ßç‡¶ü ‡¶∏‡ßç‡¶ü‡ßá‡¶ü ‡¶Æ‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶ú ‡¶ï‡¶∞‡ßá‡•§ ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶æ‡¶∞ ‡¶°‡ßá‡¶ü‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø TanStack Query ‡¶Ö‡¶®‡ßá‡¶ï ‡¶¨‡ßá‡¶∂‡¶ø ‡¶è‡¶´‡¶ø‡¶∂‡¶ø‡ßü‡ßá‡¶®‡ßç‡¶ü ‡¶ï‡¶æ‡¶∞‡¶£ ‡¶è‡¶§‡ßá ‡¶ï‡ßç‡¶Ø‡¶æ‡¶∂‡¶ø‡¶Ç, ‡¶∞‡¶ø-‡¶´‡ßá‡¶ö‡¶ø‡¶Ç ‡¶¨‡¶ø‡¶≤‡ßç‡¶ü-‡¶á‡¶® ‡¶•‡¶æ‡¶ï‡ßá‡•§
2.  **`staleTime` ‡¶è‡¶¨‡¶Ç `gcTime` (cacheTime) ‡¶è‡¶∞ ‡¶™‡¶æ‡¶∞‡ßç‡¶•‡¶ï‡ßç‡¶Ø ‡¶ï‡ßÄ?**
    - _‡¶â‡¶§‡ßç‡¶§‡¶∞:_ `staleTime` ‡¶π‡¶≤‡ßã ‡¶ï‡¶§‡¶ï‡ßç‡¶∑‡¶£ ‡¶°‡ßá‡¶ü‡¶æ "‡¶´‡ßç‡¶∞‡ßá‡¶∂" ‡¶•‡¶æ‡¶ï‡¶¨‡ßá (‡¶∞‡¶ø-‡¶´‡ßá‡¶ö ‡¶π‡¶¨‡ßá ‡¶®‡¶æ)‡•§ `gcTime` ‡¶π‡¶≤‡ßã ‡¶Ö‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡ßÉ‡¶§ ‡¶°‡ßá‡¶ü‡¶æ ‡¶ï‡¶§‡¶ï‡ßç‡¶∑‡¶£ ‡¶Æ‡ßá‡¶Æ‡ßã‡¶∞‡¶ø‡¶§‡ßá ‡¶•‡¶æ‡¶ï‡¶¨‡ßá ‡¶°‡¶ø‡¶≤‡¶ø‡¶ü ‡¶π‡¶ì‡ßü‡¶æ‡¶∞ ‡¶Ü‡¶ó‡ßá‡•§
3.  **Query Invalidation ‡¶ï‡ßÄ?**
    - _‡¶â‡¶§‡ßç‡¶§‡¶∞:_ ‡¶Æ‡ßç‡¶Ø‡¶æ‡¶®‡ßÅ‡ßü‡¶æ‡¶≤‡¶ø ‡¶ï‡ßç‡¶Ø‡¶æ‡¶∂ ‡¶ï‡ßç‡¶≤‡¶ø‡ßü‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßá ‡¶®‡¶§‡ßÅ‡¶® ‡¶°‡ßá‡¶ü‡¶æ ‡¶´‡ßá‡¶ö ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶™‡ßç‡¶∞‡¶ï‡ßç‡¶∞‡¶ø‡ßü‡¶æ‡•§

---

## ‡ßß‡ßß. ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶ì ‡¶∏‡¶Æ‡¶æ‡¶ß‡¶æ‡¶® (Gotchas & Troubleshooting)

- **‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ:** ‡¶°‡ßá‡¶ü‡¶æ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶™‡¶∞ UI ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶π‡¶ö‡ßç‡¶õ‡ßá ‡¶®‡¶æ‡•§
  - **‡¶∏‡¶Æ‡¶æ‡¶ß‡¶æ‡¶®:** ‡¶Æ‡¶ø‡¶â‡¶ü‡ßá‡¶∂‡¶®‡ßá‡¶∞ `onSuccess`-‡¶è `queryClient.invalidateQueries` ‡¶ï‡¶≤ ‡¶ï‡¶∞‡ßá‡¶õ‡ßá‡¶® ‡¶ï‡¶ø‡¶®‡¶æ ‡¶ö‡ßá‡¶ï ‡¶ï‡¶∞‡ßÅ‡¶®‡•§
- **‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ:** "No QueryClient set, use QueryClientProvider" ‡¶è‡¶∞‡¶∞‡•§
  - **‡¶∏‡¶Æ‡¶æ‡¶ß‡¶æ‡¶®:** ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™‡¶ü‡¶ø `QueryClientProvider` ‡¶¶‡¶ø‡ßü‡ßá ‡¶∞‚Äç‡ßç‡¶Ø‡¶æ‡¶™ ‡¶ï‡¶∞‡¶æ ‡¶®‡ßá‡¶á‡•§ `layout.js` ‡¶¨‡¶æ `providers.js` ‡¶ö‡ßá‡¶ï ‡¶ï‡¶∞‡ßÅ‡¶®‡•§

---

## ‡ßß‡ß®. ‡¶∞‡¶ø‡ßü‡ßá‡¶≤ ‡¶™‡ßç‡¶∞‡¶ú‡ßá‡¶ï‡ßç‡¶ü ‡¶ö‡ßá‡¶ï‡¶≤‡¶ø‡¶∏‡ßç‡¶ü (Real Project Checklist)

‡¶®‡¶§‡ßÅ‡¶® ‡¶™‡ßç‡¶∞‡¶ú‡ßá‡¶ï‡ßç‡¶ü ‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶∏‡¶Æ‡ßü ‡¶è‡¶á ‡¶ß‡¶æ‡¶™‡¶ó‡ßÅ‡¶≤‡ßã ‡¶Ö‡¶®‡ßÅ‡¶∏‡¶∞‡¶£ ‡¶ï‡¶∞‡ßÅ‡¶®:

- [ ] `npm install @tanstack/react-query axios`
- [ ] `src/services/api.js` ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡ßÅ‡¶® (Axios instance ‡¶∏‡ßá‡¶ü‡¶Ü‡¶™)‡•§
- [ ] `src/app/providers.js` ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡ßÅ‡¶® ‡¶è‡¶¨‡¶Ç ‡¶ï‡¶®‡¶´‡¶ø‡¶ó‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§
- [ ] `src/app/layout.js`-‡¶è Provider ‡¶∞‚Äç‡ßç‡¶Ø‡¶æ‡¶™ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§
- [ ] `src/hooks` ‡¶´‡ßã‡¶≤‡ßç‡¶°‡¶æ‡¶∞ ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡ßÅ‡¶® ‡¶∏‡¶¨ ‡¶ï‡ßÅ‡ßü‡ßá‡¶∞‡¶ø ‡¶π‡ßÅ‡¶ï‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø‡•§
- [ ] `src/services` ‡¶´‡ßã‡¶≤‡ßç‡¶°‡¶æ‡¶∞ ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡ßÅ‡¶® API ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®‡¶ó‡ßÅ‡¶≤‡ßã‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø‡•§

---

## ‡ßß‡ß©. ‡¶™‡¶∞‡¶¨‡¶∞‡ßç‡¶§‡ßÄ ‡¶ß‡¶æ‡¶™ (Next Steps)

**Mini Project Idea:**
‡¶è‡¶ï‡¶ü‡¶ø **"Product Dashboard"** ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡ßÅ‡¶® ‡¶Ø‡ßá‡¶ñ‡¶æ‡¶®‡ßá:

1.  ‡¶™‡ßç‡¶∞‡ßã‡¶°‡¶æ‡¶ï‡ßç‡¶ü ‡¶≤‡¶ø‡¶∏‡ßç‡¶ü ‡¶¶‡ßá‡¶ñ‡¶æ‡¶¨‡ßá (Pagination ‡¶∏‡¶π)‡•§
2.  ‡¶®‡¶§‡ßÅ‡¶® ‡¶™‡ßç‡¶∞‡ßã‡¶°‡¶æ‡¶ï‡ßç‡¶ü ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶° ‡¶ï‡¶∞‡¶æ ‡¶Ø‡¶æ‡¶¨‡ßá (Mutation)‡•§
3.  ‡¶™‡ßç‡¶∞‡ßã‡¶°‡¶æ‡¶ï‡ßç‡¶ü ‡¶°‡¶ø‡¶≤‡¶ø‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶Ø‡¶æ‡¶¨‡ßá‡•§

**Resources:**

- [TanStack Query Official Docs](https://tanstack.com/query/latest)
- [TkDodo's Blog](https://tkdodo.eu/blog/practical-react-query) (‡¶Ö‡¶§‡ßç‡¶Ø‡¶®‡ßç‡¶§ ‡¶ú‡¶®‡¶™‡ßç‡¶∞‡¶ø‡ßü ‡¶è‡¶¨‡¶Ç ‡¶á‡¶®-‡¶°‡ßá‡¶™‡¶• ‡¶¨‡ßç‡¶≤‡¶ó‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø)

‡¶∂‡ßÅ‡¶≠‡¶ï‡¶æ‡¶Æ‡¶®‡¶æ! ‡¶è‡¶á ‡¶ó‡¶æ‡¶á‡¶°‡¶ü‡¶ø ‡¶´‡¶≤‡ßã ‡¶ï‡¶∞‡¶≤‡ßá ‡¶Ü‡¶™‡¶®‡¶ø ‡¶®‡¶ø‡¶É‡¶∏‡¶®‡ßç‡¶¶‡ßá‡¶π‡ßá ‡¶è‡¶ï‡¶ú‡¶® ‡¶ï‡¶®‡¶´‡¶ø‡¶°‡ßá‡¶®‡ßç‡¶ü ‡¶ú‡ßÅ‡¶®‡¶ø‡¶Ø‡¶º‡¶∞ ‡¶°‡ßá‡¶≠‡ßá‡¶≤‡¶™‡¶æ‡¶∞ ‡¶π‡¶ø‡¶∏‡ßá‡¶¨‡ßá ‡¶®‡¶ø‡¶ú‡ßá‡¶ï‡ßá ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡¶¨‡ßá‡¶®‡•§

---

## ‡ßß‡ß™. ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶≠‡¶æ‡¶®‡ßç‡¶∏‡¶° ‡¶™‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∞‡ßç‡¶® (Advanced Patterns)

‡¶¨‡ßá‡¶∏‡¶ø‡¶ï CRUD ‡¶Ö‡¶™‡¶æ‡¶∞‡ßá‡¶∂‡¶®‡ßá‡¶∞ ‡¶¨‡¶æ‡¶á‡¶∞‡ßá‡¶ì ‡¶∞‡¶ø‡ßü‡ßá‡¶≤-‡¶ì‡ßü‡¶æ‡¶∞‡ßç‡¶≤‡ßç‡¶° ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™‡ßç‡¶≤‡¶ø‡¶ï‡ßá‡¶∂‡¶®‡ßá ‡¶Ü‡¶Æ‡¶æ‡¶¶‡ßá‡¶∞ ‡¶Ö‡¶®‡ßá‡¶ï ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶≠‡¶æ‡¶®‡ßç‡¶∏‡¶° ‡¶∏‡¶ø‡¶®‡¶æ‡¶∞‡¶ø‡¶ì ‡¶π‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶°‡ßá‡¶≤ ‡¶ï‡¶∞‡¶§‡ßá ‡¶π‡ßü‡•§ ‡¶®‡¶ø‡¶ö‡ßá ‡¶è‡¶Æ‡¶® ‡¶ï‡¶ø‡¶õ‡ßÅ ‡¶ï‡¶Æ‡¶® ‡¶™‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∞‡ßç‡¶® ‡¶Ü‡¶≤‡ßã‡¶ö‡¶®‡¶æ ‡¶ï‡¶∞‡¶æ ‡¶π‡¶≤‡ßã‡•§

### ‡ßß. Optimistic Updates (‡¶Ö‡¶´‡¶≤‡¶æ‡¶á‡¶®-‡¶´‡¶æ‡¶∞‡ßç‡¶∏‡ßç‡¶ü UX)

**‡¶ï‡¶ø ‡¶è‡¶¨‡¶Ç ‡¶ï‡ßá‡¶®?**
‡¶∏‡¶æ‡¶ß‡¶æ‡¶∞‡¶£‡¶§ ‡¶Ü‡¶Æ‡¶∞‡¶æ ‡¶Ø‡¶ñ‡¶® ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶æ‡¶∞‡ßá ‡¶°‡ßá‡¶ü‡¶æ ‡¶™‡¶æ‡¶†‡¶æ‡¶á (‡¶Ø‡ßá‡¶Æ‡¶® ‡¶≤‡¶æ‡¶á‡¶ï ‡¶¨‡¶æ‡¶ü‡¶® ‡¶ï‡ßç‡¶≤‡¶ø‡¶ï), ‡¶§‡¶ñ‡¶® ‡¶∞‡ßá‡¶∏‡¶™‡¶®‡ßç‡¶∏ ‡¶Ü‡¶∏‡¶æ‡¶∞ ‡¶™‡¶∞ UI ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡¶ø‡•§ ‡¶è‡¶§‡ßá ‡¶®‡ßá‡¶ü‡¶ì‡ßü‡¶æ‡¶∞‡ßç‡¶ï ‡¶∏‡ßç‡¶≤‡ßã ‡¶π‡¶≤‡ßá ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶°‡¶ø‡¶≤‡ßá ‡¶Ö‡¶®‡ßÅ‡¶≠‡¶¨ ‡¶ï‡¶∞‡ßá‡•§
**Optimistic Update** ‡¶π‡¶≤‡ßã: ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶æ‡¶∞‡ßá ‡¶∞‡¶ø‡¶ï‡ßã‡ßü‡ßá‡¶∏‡ßç‡¶ü ‡¶™‡¶æ‡¶†‡¶æ‡¶®‡ßã‡¶∞ **‡¶Ü‡¶ó‡ßá‡¶á** UI ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡ßá ‡¶´‡ßá‡¶≤‡¶æ‡•§ ‡¶Ø‡¶¶‡¶ø ‡¶∞‡¶ø‡¶ï‡ßã‡ßü‡ßá‡¶∏‡ßç‡¶ü ‡¶´‡ßá‡¶á‡¶≤ ‡¶ï‡¶∞‡ßá, ‡¶§‡¶¨‡ßá ‡¶Ü‡¶ó‡ßá‡¶∞ ‡¶Ö‡¶¨‡¶∏‡ßç‡¶•‡¶æ‡ßü ‡¶´‡¶ø‡¶∞‡ßá ‡¶Ø‡¶æ‡¶ì‡ßü‡¶æ (Rollback)‡•§ ‡¶è‡¶§‡ßá ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™ ‡¶Ö‡¶®‡ßá‡¶ï ‡¶´‡¶æ‡¶∏‡ßç‡¶ü ‡¶Æ‡¶®‡ßá ‡¶π‡ßü‡•§

**‡¶ï‡¶ø‡¶≠‡¶æ‡¶¨‡ßá ‡¶ï‡¶æ‡¶ú ‡¶ï‡¶∞‡ßá?**
`onMutate`, `onError`, ‡¶è‡¶¨‡¶Ç `onSettled` ‡¶π‡ßÅ‡¶ï ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßá ‡¶è‡¶ü‡¶ø ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡•§

**Code Example: Like Button**

`src/hooks/useLikePost.js`

```javascript
import { useMutation, useQueryClient } from "@tanstack/react-query";
import { likePostApi } from "@/services/postService";

export const useLikePost = () => {
  const queryClient = useQueryClient();

  return useMutation({
    mutationFn: likePostApi,

    // ‡ßß. ‡¶Æ‡¶ø‡¶â‡¶ü‡ßá‡¶∂‡¶® ‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶π‡¶ì‡ßü‡¶æ‡¶∞ ‡¶∏‡¶æ‡¶•‡ßá ‡¶∏‡¶æ‡¶•‡ßá ‡¶ï‡¶≤ ‡¶π‡ßü
    onMutate: async (newLikeData) => {
      // ‡ß®. ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï‡¶ó‡ßç‡¶∞‡¶æ‡¶â‡¶®‡ßç‡¶° ‡¶∞‡¶ø-‡¶´‡ßá‡¶ö ‡¶¨‡¶®‡ßç‡¶ß ‡¶ï‡¶∞‡¶ø ‡¶Ø‡¶æ‡¶§‡ßá ‡¶Ü‡¶Æ‡¶æ‡¶¶‡ßá‡¶∞ ‡¶Ö‡¶™‡ßç‡¶ü‡¶ø‡¶Æ‡¶ø‡¶∏‡ßç‡¶ü‡¶ø‡¶ï ‡¶°‡ßá‡¶ü‡¶æ ‡¶ì‡¶≠‡¶æ‡¶∞‡¶∞‡¶æ‡¶á‡¶ü ‡¶®‡¶æ ‡¶π‡ßü
      await queryClient.cancelQueries({
        queryKey: ["posts", newLikeData.postId],
      });

      // ‡ß©. ‡¶Ü‡¶ó‡ßá‡¶∞ ‡¶°‡ßá‡¶ü‡¶æ ‡¶∏‡ßç‡¶®‡ßç‡¶Ø‡¶æ‡¶™‡¶∂‡¶ü ‡¶π‡¶ø‡¶∏‡ßá‡¶¨‡ßá ‡¶∞‡¶æ‡¶ñ‡¶ø (‡¶∞‡ßã‡¶≤‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø)
      const previousPost = queryClient.getQueryData([
        "posts",
        newLikeData.postId,
      ]);

      // ‡ß™. ‡¶ï‡ßç‡¶Ø‡¶æ‡¶∂ ‡¶Æ‡ßç‡¶Ø‡¶æ‡¶®‡ßÅ‡ßü‡¶æ‡¶≤‡¶ø ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡¶ø (UI ‡¶∏‡¶æ‡¶•‡ßá ‡¶∏‡¶æ‡¶•‡ßá ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶π‡¶¨‡ßá)
      queryClient.setQueryData(["posts", newLikeData.postId], (old) => ({
        ...old,
        likes: old.likes + 1,
        isLiked: true,
      }));

      // ‡ß´. ‡¶ï‡¶®‡¶ü‡ßá‡¶ï‡ßç‡¶∏‡¶ü ‡¶∞‡¶ø‡¶ü‡¶æ‡¶∞‡ßç‡¶® ‡¶ï‡¶∞‡¶ø ‡¶Ø‡¶æ‡¶§‡ßá onError-‡¶è ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ ‡¶Ø‡¶æ‡ßü
      return { previousPost };
    },

    // ‡ß¨. ‡¶Ø‡¶¶‡¶ø ‡¶è‡¶∞‡¶∞ ‡¶π‡ßü, ‡¶Ü‡¶ó‡ßá‡¶∞ ‡¶Ö‡¶¨‡¶∏‡ßç‡¶•‡¶æ‡ßü ‡¶´‡¶ø‡¶∞‡ßá ‡¶Ø‡¶æ‡¶á
    onError: (err, newLikeData, context) => {
      queryClient.setQueryData(
        ["posts", newLikeData.postId],
        context.previousPost
      );
    },

    // ‡ß≠. ‡¶∏‡¶´‡¶≤ ‡¶¨‡¶æ ‡¶¨‡ßç‡¶Ø‡¶∞‡ßç‡¶• ‡¶Ø‡¶æ‡¶á ‡¶π‡ßã‡¶ï, ‡¶´‡ßç‡¶∞‡ßá‡¶∂ ‡¶°‡ßá‡¶ü‡¶æ ‡¶´‡ßá‡¶ö ‡¶ï‡¶∞‡¶ø
    onSettled: (data, error, newLikeData) => {
      queryClient.invalidateQueries({
        queryKey: ["posts", newLikeData.postId],
      });
    },
  });
};
```

### ‡ß®. Infinite Queries (Infinite Scroll)

‡¶∏‡ßã‡¶∂‡ßç‡¶Ø‡¶æ‡¶≤ ‡¶Æ‡¶ø‡¶°‡¶ø‡ßü‡¶æ ‡¶´‡¶ø‡¶° ‡¶¨‡¶æ ‡¶™‡ßç‡¶∞‡ßã‡¶°‡¶æ‡¶ï‡ßç‡¶ü ‡¶≤‡¶ø‡¶∏‡ßç‡¶ü‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø "Load More" ‡¶¨‡¶æ ‡¶á‡¶®‡¶´‡¶ø‡¶®‡¶ø‡¶ü ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶≤ ‡¶ñ‡ßÅ‡¶¨‡¶á ‡¶ï‡¶Æ‡¶®‡•§ TanStack Query ‡¶è‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø `useInfiniteQuery` ‡¶π‡ßÅ‡¶ï ‡¶¶‡ßá‡ßü‡•§

**Code Example: Paginated Product List**

`src/hooks/useProducts.js`

```javascript
import { useInfiniteQuery } from "@tanstack/react-query";
import api from "@/services/api";

const fetchProducts = async ({ pageParam = 1 }) => {
  const { data } = await api.get(`/products?page=${pageParam}&limit=10`);
  return data; // { items: [...], nextPage: 2, hasMore: true }
};

export const useInfiniteProducts = () => {
  return useInfiniteQuery({
    queryKey: ["products", "infinite"],
    queryFn: fetchProducts,
    // ‡¶™‡¶∞‡¶¨‡¶∞‡ßç‡¶§‡ßÄ ‡¶™‡ßá‡¶ú ‡¶™‡ßç‡¶Ø‡¶æ‡¶∞‡¶æ‡¶Æ ‡¶®‡¶ø‡¶∞‡ßç‡¶ß‡¶æ‡¶∞‡¶£ ‡¶ï‡¶∞‡¶æ
    getNextPageParam: (lastPage, allPages) => {
      return lastPage.hasMore ? lastPage.nextPage : undefined;
    },
    initialPageParam: 1,
  });
};
```

**Component Implementation:**

```javascript
"use client";
import { useInfiniteProducts } from "@/hooks/useProducts";
import { useEffect } from "react";
import { useInView } from "react-intersection-observer"; // npm install react-intersection-observer

export default function ProductList() {
  const { data, fetchNextPage, hasNextPage, isFetchingNextPage, status } =
    useInfiniteProducts();

  const { ref, inView } = useInView();

  // ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶≤ ‡¶ï‡¶∞‡ßá ‡¶®‡¶ø‡¶ö‡ßá ‡¶®‡¶æ‡¶Æ‡¶≤‡ßá ‡¶Ö‡¶ü‡ßã‡¶Æ‡ßá‡¶ü‡¶ø‡¶ï ‡¶≤‡ßã‡¶° ‡¶π‡¶¨‡ßá
  useEffect(() => {
    if (inView && hasNextPage) {
      fetchNextPage();
    }
  }, [inView, hasNextPage, fetchNextPage]);

  if (status === "pending") return <p>Loading...</p>;

  return (
    <div>
      {data.pages.map((page, i) => (
        <div key={i}>
          {page.items.map((product) => (
            <div key={product.id} className="border p-4 my-2">
              {product.name}
            </div>
          ))}
        </div>
      ))}

      {/* ‡¶≤‡ßã‡¶°‡¶ø‡¶Ç ‡¶á‡¶®‡ßç‡¶°‡¶ø‡¶ï‡ßá‡¶ü‡¶∞ ‡¶è‡¶¨‡¶Ç ‡¶ü‡ßç‡¶∞‡¶ø‡¶ó‡¶æ‡¶∞ ‡¶™‡ßü‡ßá‡¶®‡ßç‡¶ü */}
      <div ref={ref} className="h-10 text-center">
        {isFetchingNextPage && "Loading more..."}
      </div>
    </div>
  );
}
```

### ‡ß©. Dependent Queries (‡¶®‡¶ø‡¶∞‡ßç‡¶≠‡¶∞‡¶∂‡ßÄ‡¶≤ ‡¶ï‡ßÅ‡ßü‡ßá‡¶∞‡¶ø)

‡¶Æ‡¶æ‡¶ù‡ßá ‡¶Æ‡¶æ‡¶ù‡ßá ‡¶è‡¶ï‡¶ü‡¶ø ‡¶ï‡ßÅ‡ßü‡ßá‡¶∞‡¶ø ‡¶ö‡¶æ‡¶≤‡¶æ‡¶®‡ßã‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶Ö‡¶®‡ßç‡¶Ø ‡¶è‡¶ï‡¶ü‡¶ø ‡¶ï‡ßÅ‡ßü‡ßá‡¶∞‡¶ø‡¶∞ ‡¶°‡ßá‡¶ü‡¶æ ‡¶™‡ßç‡¶∞‡ßü‡ßã‡¶ú‡¶® ‡¶π‡ßü‡•§ ‡¶Ø‡ßá‡¶Æ‡¶®: ‡¶Ü‡¶ó‡ßá `User` ‡¶´‡ßá‡¶ö ‡¶π‡¶¨‡ßá, ‡¶§‡¶æ‡¶∞‡¶™‡¶∞ ‡¶∏‡ßá‡¶á ‡¶á‡¶â‡¶ú‡¶æ‡¶∞‡ßá‡¶∞ `ID` ‡¶¶‡¶ø‡ßü‡ßá ‡¶§‡¶æ‡¶∞ `Posts` ‡¶´‡ßá‡¶ö ‡¶π‡¶¨‡ßá‡•§

**‡¶ï‡¶ø‡¶≠‡¶æ‡¶¨‡ßá ‡¶ï‡¶∞‡¶¨‡ßá‡¶®?**
`enabled` ‡¶Ö‡¶™‡¶∂‡¶® ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßá‡•§

```javascript
// ‡ßß. ‡¶™‡ßç‡¶∞‡¶•‡¶Æ‡ßá ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶´‡ßá‡¶ö
const { data: user } = useQuery({
  queryKey: ["user", email],
  queryFn: fetchUserByEmail,
});

const userId = user?.id;

// ‡ß®. ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶Ü‡¶á‡¶°‡¶ø ‡¶™‡¶æ‡¶ì‡ßü‡¶æ‡¶∞ ‡¶™‡¶∞‡¶á ‡¶ï‡ßá‡¶¨‡¶≤ ‡¶™‡ßã‡¶∏‡ßç‡¶ü ‡¶´‡ßá‡¶ö ‡¶π‡¶¨‡ßá
const { data: posts } = useQuery({
  queryKey: ["posts", userId],
  queryFn: () => fetchPostsByUserId(userId),
  // enabled false ‡¶π‡¶≤‡ßá ‡¶ï‡ßÅ‡ßü‡ßá‡¶∞‡¶ø ‡¶∞‡¶æ‡¶® ‡¶ï‡¶∞‡¶¨‡ßá ‡¶®‡¶æ
  enabled: !!userId,
});
```

### ‡ß™. Parallel Queries (‡¶è‡¶ï‡¶∏‡¶æ‡¶•‡ßá ‡¶Ö‡¶®‡ßá‡¶ï ‡¶ï‡ßÅ‡ßü‡ßá‡¶∞‡¶ø)

‡¶°‡ßç‡¶Ø‡¶æ‡¶∂‡¶¨‡ßã‡¶∞‡ßç‡¶°‡ßá ‡¶è‡¶ï‡¶∏‡¶æ‡¶•‡ßá ‡¶Ö‡¶®‡ßá‡¶ï‡¶ó‡ßÅ‡¶≤‡ßã API ‡¶ï‡¶≤ ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶™‡ßç‡¶∞‡ßü‡ßã‡¶ú‡¶® ‡¶π‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡ßá‡•§ `useQueries` ‡¶π‡ßÅ‡¶ï ‡¶¶‡¶ø‡ßü‡ßá ‡¶è‡¶ü‡¶ø ‡¶è‡¶´‡¶ø‡¶∂‡¶ø‡ßü‡ßá‡¶®‡ßç‡¶ü‡¶≤‡¶ø ‡¶ï‡¶∞‡¶æ ‡¶Ø‡¶æ‡ßü‡•§

```javascript
import { useQueries } from "@tanstack/react-query";

const Dashboard = ({ userIds }) => {
  const userQueries = useQueries({
    queries: userIds.map((id) => ({
      queryKey: ["user", id],
      queryFn: () => fetchUser(id),
    })),
  });

  // ‡¶∏‡¶¨ ‡¶≤‡ßã‡¶°‡¶ø‡¶Ç ‡¶∂‡ßá‡¶∑ ‡¶ï‡¶ø‡¶®‡¶æ ‡¶ö‡ßá‡¶ï ‡¶ï‡¶∞‡¶æ
  const isLoading = userQueries.some((q) => q.isLoading);

  if (isLoading) return "Loading users...";

  return (
    <div>
      {userQueries.map((query, index) => (
        <div key={index}>{query.data?.name}</div>
      ))}
    </div>
  );
};
```

### ‡ß´. Query Cancellation (‡¶ï‡ßÅ‡ßü‡ßá‡¶∞‡¶ø ‡¶¨‡¶æ‡¶§‡¶ø‡¶≤ ‡¶ï‡¶∞‡¶æ)

‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶Ø‡¶ñ‡¶® ‡¶∏‡¶æ‡¶∞‡ßç‡¶ö ‡¶¨‡¶ï‡ßç‡¶∏‡ßá ‡¶ü‡¶æ‡¶á‡¶™ ‡¶ï‡¶∞‡ßá, ‡¶§‡¶ñ‡¶® ‡¶™‡ßç‡¶∞‡¶§‡¶ø ‡¶ï‡ßç‡¶Ø‡¶æ‡¶∞‡ßá‡¶ï‡ßç‡¶ü‡¶æ‡¶∞‡ßá ‡¶∞‡¶ø‡¶ï‡ßã‡ßü‡ßá‡¶∏‡ßç‡¶ü ‡¶®‡¶æ ‡¶™‡¶æ‡¶†‡¶ø‡ßü‡ßá ‡¶¨‡¶æ ‡¶Ü‡¶ó‡ßá‡¶∞ ‡¶∞‡¶ø‡¶ï‡ßã‡ßü‡ßá‡¶∏‡ßç‡¶ü ‡¶¨‡¶æ‡¶§‡¶ø‡¶≤ ‡¶ï‡¶∞‡ßá ‡¶®‡¶§‡ßÅ‡¶® ‡¶∞‡¶ø‡¶ï‡ßã‡ßü‡ßá‡¶∏‡ßç‡¶ü ‡¶™‡¶æ‡¶†‡¶æ‡¶®‡ßã ‡¶â‡¶ö‡¶ø‡¶§‡•§ TanStack Query ‡¶Ö‡¶ü‡ßã‡¶Æ‡ßá‡¶ü‡¶ø‡¶ï‡ßç‡¶Ø‡¶æ‡¶≤‡¶ø `AbortController` ‡¶∏‡¶ø‡¶ó‡¶®‡ßç‡¶Ø‡¶æ‡¶≤ ‡¶™‡¶æ‡¶∏ ‡¶ï‡¶∞‡ßá‡•§

**Service:**

```javascript
export const searchUsers = async ({ queryKey, signal }) => {
  const [_, searchTerm] = queryKey;
  const response = await axios.get(`/users?q=${searchTerm}`, { signal });
  return response.data;
};
```

**Hook:**

```javascript
const { data } = useQuery({
  queryKey: ["search", searchTerm],
  queryFn: searchUsers,
});
```

‡¶è‡¶ñ‡¶® ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶¶‡ßç‡¶∞‡ßÅ‡¶§ ‡¶ü‡¶æ‡¶á‡¶™ ‡¶ï‡¶∞‡¶≤‡ßá ‡¶Ü‡¶ó‡ßá‡¶∞ ‡¶™‡ßá‡¶®‡ßç‡¶°‡¶ø‡¶Ç ‡¶∞‡¶ø‡¶ï‡ßã‡ßü‡ßá‡¶∏‡ßç‡¶ü‡¶ó‡ßÅ‡¶≤‡ßã ‡¶Ö‡¶ü‡ßã‡¶Æ‡ßá‡¶ü‡¶ø‡¶ï ‡¶ï‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶∏‡ßá‡¶≤ ‡¶π‡ßü‡ßá ‡¶Ø‡¶æ‡¶¨‡ßá‡•§

### ‡ß¨. Prefetching Data (‡¶°‡ßá‡¶ü‡¶æ ‡¶™‡ßç‡¶∞‡¶ø-‡¶´‡ßá‡¶ö‡¶ø‡¶Ç)

‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶ï‡ßã‡¶®‡ßã ‡¶≤‡¶ø‡¶Ç‡¶ï‡ßá ‡¶ï‡ßç‡¶≤‡¶ø‡¶ï ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶Ü‡¶ó‡ßá‡¶á ‡¶°‡ßá‡¶ü‡¶æ ‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡ßá ‡¶∞‡¶æ‡¶ñ‡¶æ, ‡¶Ø‡¶æ‡¶§‡ßá ‡¶™‡ßá‡¶ú ‡¶á‡¶®‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶ü‡¶≤‡¶ø ‡¶≤‡ßã‡¶° ‡¶π‡ßü‡•§

**‡¶ï‡¶ñ‡¶® ‡¶ï‡¶∞‡¶¨‡ßá‡¶®?**

- ‡¶Ø‡¶ñ‡¶® ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶≤‡¶ø‡¶Ç‡¶ï‡ßá‡¶∞ ‡¶ì‡¶™‡¶∞ ‡¶Æ‡¶æ‡¶â‡¶∏ ‡¶π‡ßã‡¶≠‡¶æ‡¶∞ (Hover) ‡¶ï‡¶∞‡ßá‡•§
- Next.js Server Component-‡¶è‡•§

**Client Side Prefetch (Hover):**

```javascript
const queryClient = useQueryClient();

const handleMouseEnter = () => {
  queryClient.prefetchQuery({
    queryKey: ["todos"],
    queryFn: fetchTodos,
    staleTime: 10 * 1000, // ‡ßß‡ß¶ ‡¶∏‡ßá‡¶ï‡ßá‡¶®‡ßç‡¶°‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶≠‡ßç‡¶Ø‡¶æ‡¶≤‡¶ø‡¶°
  });
};

return <button onMouseEnter={handleMouseEnter}>See Todos</button>;
```

### ‡ß≠. TypeScript Integration

TypeScript ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶≤‡ßá `useQuery` ‡¶è‡¶¨‡¶Ç `useMutation` ‡¶è‡¶∞ ‡¶ü‡¶æ‡¶á‡¶™ ‡¶∏‡ßá‡¶´‡¶ü‡¶ø ‡¶®‡¶ø‡¶∂‡ßç‡¶ö‡¶ø‡¶§ ‡¶ï‡¶∞‡¶æ ‡¶Ø‡¶æ‡ßü‡•§

```typescript
import { useQuery } from "@tanstack/react-query";

// ‡¶ü‡¶æ‡¶á‡¶™ ‡¶°‡¶ø‡¶´‡¶æ‡¶á‡¶® ‡¶ï‡¶∞‡¶æ
interface Todo {
  id: number;
  title: string;
  completed: boolean;
}

const fetchTodos = async (): Promise<Todo[]> => {
  const response = await axios.get("/todos");
  return response.data;
};

export const useTodos = () => {
  // ‡¶ú‡ßá‡¶®‡ßá‡¶∞‡¶ø‡¶ï ‡¶ü‡¶æ‡¶á‡¶™ ‡¶™‡¶æ‡¶∏ ‡¶ï‡¶∞‡¶æ <TData, TError>
  return useQuery<Todo[], Error>({
    queryKey: ["todos"],
    queryFn: fetchTodos,
  });
};
```

---

## ‡ßß‡ß´. ‡¶™‡¶æ‡¶∞‡¶´‡¶∞‡¶Æ‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶∏ ‡¶Ö‡¶™‡ßç‡¶ü‡¶ø‡¶Æ‡¶æ‡¶á‡¶ú‡ßá‡¶∂‡¶® ‡¶™‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∞‡ßç‡¶®

‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™ ‡¶∏‡ßç‡¶ï‡ßá‡¶≤ ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶∏‡¶æ‡¶•‡ßá ‡¶∏‡¶æ‡¶•‡ßá ‡¶™‡¶æ‡¶∞‡¶´‡¶∞‡¶Æ‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶∏ ‡¶†‡¶ø‡¶ï ‡¶∞‡¶æ‡¶ñ‡¶æ ‡¶ú‡¶∞‡ßÅ‡¶∞‡¶ø‡•§

### ‡ßß. Stale-While-Revalidate Pattern

TanStack Query ‡¶°‡¶ø‡¶´‡¶≤‡ßç‡¶ü‡¶≠‡¶æ‡¶¨‡ßá‡¶á ‡¶è‡¶á ‡¶™‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∞‡ßç‡¶® ‡¶´‡¶≤‡ßã ‡¶ï‡¶∞‡ßá‡•§ ‡¶è‡¶ü‡¶ø ‡¶™‡ßç‡¶∞‡¶•‡¶Æ‡ßá ‡¶ï‡ßç‡¶Ø‡¶æ‡¶∂ ‡¶•‡ßá‡¶ï‡ßá ‡¶™‡ßÅ‡¶∞‡¶®‡ßã (Stale) ‡¶°‡ßá‡¶ü‡¶æ ‡¶¶‡ßá‡¶ñ‡¶æ‡ßü, ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï‡¶ó‡ßç‡¶∞‡¶æ‡¶â‡¶®‡ßç‡¶°‡ßá ‡¶®‡¶§‡ßÅ‡¶® ‡¶°‡ßá‡¶ü‡¶æ ‡¶´‡ßá‡¶ö ‡¶ï‡¶∞‡ßá ‡¶è‡¶¨‡¶Ç ‡¶§‡¶æ‡¶∞‡¶™‡¶∞ UI ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡ßá‡•§ ‡¶è‡¶ü‡¶ø ‡¶á‡¶â‡¶ú‡¶æ‡¶∞‡¶ï‡ßá ‡¶∏‡¶¨‡¶∏‡¶Æ‡ßü ‡¶∞‡ßá‡¶∏‡¶™‡¶®‡ßç‡¶∏‡¶ø‡¶≠ ‡¶´‡¶ø‡¶≤ ‡¶¶‡ßá‡ßü‡•§

### ‡ß®. Background Refetching Strategy

‡¶∏‡¶¨‡¶∏‡¶Æ‡ßü ‡¶∏‡¶¨ ‡¶°‡ßá‡¶ü‡¶æ ‡¶∞‡¶ø-‡¶´‡ßá‡¶ö ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶¶‡¶∞‡¶ï‡¶æ‡¶∞ ‡¶®‡ßá‡¶á‡•§

- **`refetchOnWindowFocus: false`**: ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶ü‡ßç‡¶Ø‡¶æ‡¶¨ ‡¶ö‡ßá‡¶û‡ßç‡¶ú ‡¶ï‡¶∞‡ßá ‡¶´‡¶ø‡¶∞‡ßá ‡¶Ü‡¶∏‡¶≤‡ßá ‡¶∞‡¶ø-‡¶´‡ßá‡¶ö ‡¶¨‡¶®‡ßç‡¶ß ‡¶ï‡¶∞‡¶§‡ßá‡•§
- **`refetchOnMount: false`**: ‡¶ï‡¶Æ‡ßç‡¶™‡ßã‡¶®‡ßá‡¶®‡ßç‡¶ü ‡¶Æ‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶π‡¶≤‡ßá ‡¶∞‡¶ø-‡¶´‡ßá‡¶ö ‡¶¨‡¶®‡ßç‡¶ß ‡¶ï‡¶∞‡¶§‡ßá (‡¶Ø‡¶¶‡¶ø ‡¶ï‡ßç‡¶Ø‡¶æ‡¶∂ ‡¶•‡¶æ‡¶ï‡ßá)‡•§

```javascript
useQuery({
  queryKey: ["todos"],
  queryFn: fetchTodos,
  refetchOnWindowFocus: false, // ‡¶´‡ßã‡¶ï‡¶æ‡¶∏‡ßá ‡¶∞‡¶ø-‡¶´‡ßá‡¶ö ‡¶π‡¶¨‡ßá ‡¶®‡¶æ
  staleTime: 5 * 60 * 1000, // ‡ß´ ‡¶Æ‡¶ø‡¶®‡¶ø‡¶ü ‡¶™‡¶∞‡ßç‡¶Ø‡¶®‡ßç‡¶§ ‡¶°‡ßá‡¶ü‡¶æ ‡¶´‡ßç‡¶∞‡ßá‡¶∂ ‡¶•‡¶æ‡¶ï‡¶¨‡ßá
});
```

### ‡ß©. Query Key Structure Best Practices

‡¶ï‡ßÅ‡ßü‡ßá‡¶∞‡¶ø ‡¶ï‡¶ø ‡¶∏‡¶¨‡¶∏‡¶Æ‡ßü ‡¶è‡¶ï‡¶ü‡¶ø ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶∞‡ßá ‡¶π‡¶ø‡¶∏‡ßá‡¶¨‡ßá ‡¶¶‡¶ø‡¶® ‡¶è‡¶¨‡¶Ç ‡¶è‡¶ü‡¶ø `hierarchical` ‡¶¨‡¶æ ‡¶≤‡¶ú‡¶ø‡¶ï‡ßç‡¶Ø‡¶æ‡¶≤ ‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞‡ßá ‡¶∏‡¶æ‡¶ú‡¶æ‡¶®‡•§

- **‡¶ñ‡¶æ‡¶∞‡¶æ‡¶™:** `["todos-list"]`, `["todo-1"]`
- **‡¶≠‡¶æ‡¶≤‡ßã:** `["todos", "list"]`, `["todos", "detail", 1]`

‡¶è‡¶§‡ßá ‡¶á‡¶®‡¶≠‡ßç‡¶Ø‡¶æ‡¶≤‡¶ø‡¶°‡ßá‡¶∂‡¶® ‡¶∏‡¶π‡¶ú ‡¶π‡ßü‡•§ ‡¶Ø‡ßá‡¶Æ‡¶® `queryClient.invalidateQueries({ queryKey: ["todos"] })` ‡¶ï‡¶≤ ‡¶ï‡¶∞‡¶≤‡ßá ‡¶≤‡¶ø‡¶∏‡ßç‡¶ü ‡¶è‡¶¨‡¶Ç ‡¶°‡¶ø‡¶ü‡ßá‡¶á‡¶≤‡¶∏ ‡¶∏‡¶¨ ‡¶∞‡¶ø‡¶´‡ßç‡¶∞‡ßá‡¶∂ ‡¶π‡¶¨‡ßá‡•§

### ‡ß™. Placeholder Data vs Initial Data

- **Initial Data:** ‡¶è‡¶ü‡¶ø ‡¶ï‡ßç‡¶Ø‡¶æ‡¶∂‡ßá ‡¶™‡¶æ‡¶∞‡ßç‡¶Æ‡¶æ‡¶®‡ßá‡¶®‡ßç‡¶ü‡¶≤‡¶ø ‡¶∏‡ßá‡¶ü ‡¶π‡ßü‡ßá ‡¶Ø‡¶æ‡ßü‡•§ (‡¶Ø‡ßá‡¶Æ‡¶® ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶æ‡¶∞ ‡¶∏‡¶æ‡¶á‡¶° ‡¶™‡ßç‡¶∞‡¶™‡¶∏ ‡¶•‡ßá‡¶ï‡ßá ‡¶Ü‡¶∏‡¶æ ‡¶°‡ßá‡¶ü‡¶æ)‡•§
- **Placeholder Data:** ‡¶è‡¶ü‡¶ø ‡¶∂‡ßÅ‡¶ß‡ßÅ ‡¶≤‡ßã‡¶°‡¶ø‡¶Ç ‡¶Ö‡¶¨‡¶∏‡ßç‡¶•‡¶æ‡ßü ‡¶¶‡ßá‡¶ñ‡¶æ‡¶®‡ßã‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø "‡¶´‡ßá‡¶á‡¶ï" ‡¶¨‡¶æ "‡¶™‡¶æ‡¶∞‡¶∂‡¶ø‡ßü‡¶æ‡¶≤" ‡¶°‡ßá‡¶ü‡¶æ‡•§ ‡¶è‡¶ü‡¶ø ‡¶ï‡ßç‡¶Ø‡¶æ‡¶∂‡ßá ‡¶∏‡ßá‡¶≠ ‡¶π‡ßü ‡¶®‡¶æ‡•§

**Use Case:** ‡¶≤‡¶ø‡¶∏‡ßç‡¶ü ‡¶™‡ßá‡¶ú ‡¶•‡ßá‡¶ï‡ßá ‡¶°‡¶ø‡¶ü‡ßá‡¶á‡¶≤‡¶∏ ‡¶™‡ßá‡¶ú‡ßá ‡¶Ø‡¶æ‡¶ì‡ßü‡¶æ‡¶∞ ‡¶∏‡¶Æ‡ßü, ‡¶≤‡¶ø‡¶∏‡ßç‡¶ü‡ßá‡¶∞ ‡¶°‡ßá‡¶ü‡¶æ ‡¶¶‡¶ø‡ßü‡ßá ‡¶°‡¶ø‡¶ü‡ßá‡¶á‡¶≤‡¶∏ ‡¶™‡ßá‡¶ú‡ßá‡¶∞ ‡¶ï‡¶ø‡¶õ‡ßÅ ‡¶Ö‡¶Ç‡¶∂ (‡¶Ø‡ßá‡¶Æ‡¶® ‡¶ü‡¶æ‡¶á‡¶ü‡ßá‡¶≤) ‡¶á‡¶®‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶ü‡¶≤‡¶ø ‡¶¶‡ßá‡¶ñ‡¶æ‡¶®‡ßã‡•§

```javascript
useQuery({
  queryKey: ["todo", id],
  queryFn: () => fetchTodo(id),
  placeholderData: () => {
    // ‡¶ï‡ßç‡¶Ø‡¶æ‡¶∂ ‡¶•‡ßá‡¶ï‡ßá ‡¶≤‡¶ø‡¶∏‡ßç‡¶ü ‡¶ñ‡ßÅ‡¶Å‡¶ú‡ßá ‡¶∏‡ßá‡¶ñ‡¶æ‡¶® ‡¶•‡ßá‡¶ï‡ßá ‡¶è‡¶á ‡¶Ü‡¶á‡¶ü‡ßá‡¶Æ‡¶ü‡¶ø ‡¶¨‡ßá‡¶∞ ‡¶ï‡¶∞‡¶æ
    return queryClient.getQueryData(["todos"])?.find((d) => d.id === id);
  },
});
```

---

**‡¶â‡¶™‡¶∏‡¶Ç‡¶π‡¶æ‡¶∞:**
TanStack Query v5 ‡¶è‡¶ï‡¶ü‡¶ø ‡¶¨‡¶ø‡¶∂‡¶æ‡¶≤ ‡¶≤‡¶æ‡¶á‡¶¨‡ßç‡¶∞‡ßá‡¶∞‡¶ø‡•§ ‡¶Ü‡¶Æ‡¶∞‡¶æ ‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶¨‡ßá‡¶∏‡¶ø‡¶ï ‡¶•‡ßá‡¶ï‡ßá ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶≠‡¶æ‡¶®‡ßç‡¶∏‡¶° ‡¶Ö‡¶®‡ßá‡¶ï ‡¶ü‡¶™‡¶ø‡¶ï ‡¶ï‡¶≠‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßá‡¶õ‡¶ø‡•§ ‡¶è‡¶á ‡¶™‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∞‡ßç‡¶®‡¶ó‡ßÅ‡¶≤‡ßã ‡¶Ü‡ßü‡¶§‡ßç‡¶§ ‡¶ï‡¶∞‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡¶≤‡ßá ‡¶Ü‡¶™‡¶®‡¶ø ‡¶Ø‡ßá‡¶ï‡ßã‡¶®‡ßã ‡¶ï‡¶Æ‡¶™‡ßç‡¶≤‡ßá‡¶ï‡ßç‡¶∏ ‡¶´‡ßç‡¶∞‡¶®‡ßç‡¶ü‡¶è‡¶®‡ßç‡¶° ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™‡ßç‡¶≤‡¶ø‡¶ï‡ßá‡¶∂‡¶®‡ßá‡¶∞ ‡¶°‡ßá‡¶ü‡¶æ ‡¶≤‡ßá‡ßü‡¶æ‡¶∞ ‡¶ñ‡ßÅ‡¶¨ ‡¶∏‡¶π‡¶ú‡ßá‡¶á ‡¶Æ‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶ú ‡¶ï‡¶∞‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡¶¨‡ßá‡¶®‡•§ ‡¶π‡ßç‡¶Ø‡¶æ‡¶™‡¶ø ‡¶ï‡ßã‡¶°‡¶ø‡¶Ç! üöÄ
